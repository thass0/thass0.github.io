<!-- Saved from https://news.ycombinator.com/item?id=37097775 at 2025-05-12T14:19:04Z using monolith v2.10.1 -->
<html lang="en" op="item"><head><meta http-equiv="Content-Security-Policy" content="script-src 'none';"></meta><meta name="referrer" content="origin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" type="text/css" href="data:text/css;base64,Ym9keSAgeyBmb250LWZhbWlseTpWZXJkYW5hLCBHZW5ldmEsIHNhbnMtc2VyaWY7IGZvbnQtc2l6ZToxMHB0OyBjb2xvcjojODI4MjgyOyB9CnRkICAgIHsgZm9udC1mYW1pbHk6VmVyZGFuYSwgR2VuZXZhLCBzYW5zLXNlcmlmOyBmb250LXNpemU6MTBwdDsgY29sb3I6IzgyODI4MjsgfQoKLmFkbWluIHRkICAgeyBmb250LWZhbWlseTpWZXJkYW5hLCBHZW5ldmEsIHNhbnMtc2VyaWY7IGZvbnQtc2l6ZTo4LjVwdDsgY29sb3I6IzAwMDAwMDsgfQouc3VidGV4dCB0ZCB7IGZvbnQtZmFtaWx5OlZlcmRhbmEsIEdlbmV2YSwgc2Fucy1zZXJpZjsgZm9udC1zaXplOiAgN3B0OyBjb2xvcjojODI4MjgyOyB9CgppbnB1dCAgICB7IGZvbnQtZmFtaWx5Om1vbm9zcGFjZTsgZm9udC1zaXplOjEwcHQ7IH0KaW5wdXRbdHlwZT0ic3VibWl0Il0geyBmb250LWZhbWlseTpWZXJkYW5hLCBHZW5ldmEsIHNhbnMtc2VyaWY7IH0KdGV4dGFyZWEgeyBmb250LWZhbWlseTptb25vc3BhY2U7IGZvbnQtc2l6ZToxMHB0OyByZXNpemU6Ym90aDsgfQoKYTpsaW5rICAgIHsgY29sb3I6IzAwMDAwMDsgdGV4dC1kZWNvcmF0aW9uOm5vbmU7IH0KYTp2aXNpdGVkIHsgY29sb3I6IzgyODI4MjsgdGV4dC1kZWNvcmF0aW9uOm5vbmU7IH0KCi5kZWZhdWx0IHsgZm9udC1mYW1pbHk6VmVyZGFuYSwgR2VuZXZhLCBzYW5zLXNlcmlmOyBmb250LXNpemU6IDEwcHQ7IGNvbG9yOiM4MjgyODI7IH0KLmFkbWluICAgeyBmb250LWZhbWlseTpWZXJkYW5hLCBHZW5ldmEsIHNhbnMtc2VyaWY7IGZvbnQtc2l6ZTo4LjVwdDsgY29sb3I6IzAwMDAwMDsgfQoudGl0bGUgICB7IGZvbnQtZmFtaWx5OlZlcmRhbmEsIEdlbmV2YSwgc2Fucy1zZXJpZjsgZm9udC1zaXplOiAxMHB0OyBjb2xvcjojODI4MjgyOyBvdmVyZmxvdzpoaWRkZW47IH0KLnN1YnRleHQgeyBmb250LWZhbWlseTpWZXJkYW5hLCBHZW5ldmEsIHNhbnMtc2VyaWY7IGZvbnQtc2l6ZTogIDdwdDsgY29sb3I6IzgyODI4MjsgfQoueWNsaW5rcyB7IGZvbnQtZmFtaWx5OlZlcmRhbmEsIEdlbmV2YSwgc2Fucy1zZXJpZjsgZm9udC1zaXplOiAgOHB0OyBjb2xvcjojODI4MjgyOyB9Ci5wYWdldG9wIHsgZm9udC1mYW1pbHk6VmVyZGFuYSwgR2VuZXZhLCBzYW5zLXNlcmlmOyBmb250LXNpemU6IDEwcHQ7IGNvbG9yOiMyMjIyMjI7IGxpbmUtaGVpZ2h0OjEycHg7IH0KLmNvbWhlYWQgeyBmb250LWZhbWlseTpWZXJkYW5hLCBHZW5ldmEsIHNhbnMtc2VyaWY7IGZvbnQtc2l6ZTogIDhwdDsgY29sb3I6IzgyODI4MjsgfQouY29tbWVudCB7IGZvbnQtZmFtaWx5OlZlcmRhbmEsIEdlbmV2YSwgc2Fucy1zZXJpZjsgZm9udC1zaXplOiAgOXB0OyB9Ci5obm5hbWUgIHsgbWFyZ2luLWxlZnQ6MXB4OyBtYXJnaW4tcmlnaHQ6IDVweDsgfQoKI2hubWFpbiB7IG1pbi13aWR0aDogNzk2cHg7IH0KCi50aXRsZSBhIHsgd29yZC1icmVhazogYnJlYWstd29yZDsgfQoKLmNvbW1lbnQgYTpsaW5rLCAuY29tbWVudCBhOnZpc2l0ZWQgeyB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTsgfQoubm9zaG93IHsgZGlzcGxheTogbm9uZTsgfQoubm9zZWUgeyB2aXNpYmlsaXR5OiBoaWRkZW47IHBvaW50ZXItZXZlbnRzOiBub25lOyBjdXJzb3I6IGRlZmF1bHQgfQoKLmMwMCwgLmMwMCBhOmxpbmsgeyBjb2xvcjojMDAwMDAwOyB9Ci5jNWEsIC5jNWEgYTpsaW5rLCAuYzVhIGE6dmlzaXRlZCB7IGNvbG9yOiM1YTVhNWE7IH0KLmM3MywgLmM3MyBhOmxpbmssIC5jNzMgYTp2aXNpdGVkIHsgY29sb3I6IzczNzM3MzsgfQouYzgyLCAuYzgyIGE6bGluaywgLmM4MiBhOnZpc2l0ZWQgeyBjb2xvcjojODI4MjgyOyB9Ci5jODgsIC5jODggYTpsaW5rLCAuYzg4IGE6dmlzaXRlZCB7IGNvbG9yOiM4ODg4ODg7IH0KLmM5YywgLmM5YyBhOmxpbmssIC5jOWMgYTp2aXNpdGVkIHsgY29sb3I6IzljOWM5YzsgfQouY2FlLCAuY2FlIGE6bGluaywgLmNhZSBhOnZpc2l0ZWQgeyBjb2xvcjojYWVhZWFlOyB9Ci5jYmUsIC5jYmUgYTpsaW5rLCAuY2JlIGE6dmlzaXRlZCB7IGNvbG9yOiNiZWJlYmU7IH0KLmNjZSwgLmNjZSBhOmxpbmssIC5jY2UgYTp2aXNpdGVkIHsgY29sb3I6I2NlY2VjZTsgfQouY2RkLCAuY2RkIGE6bGluaywgLmNkZCBhOnZpc2l0ZWQgeyBjb2xvcjojZGRkZGRkOyB9Ci5jYTIgeyBjb2xvcjojYTMwMDAwOyB9CgoucGFnZXRvcCBhOnZpc2l0ZWQgeyBjb2xvcjojMDAwMDAwO30KLnRvcHNlbCBhOmxpbmssIC50b3BzZWwgYTp2aXNpdGVkIHsgY29sb3I6I2ZmZmZmZjsgfQoKLnN1YnRleHQgYTpsaW5rLCAuc3VidGV4dCBhOnZpc2l0ZWQgeyBjb2xvcjojODI4MjgyOyB9Ci5zdWJ0ZXh0IGE6aG92ZXIgeyB0ZXh0LWRlY29yYXRpb246dW5kZXJsaW5lOyB9CgouY29taGVhZCBhOmxpbmssIC5zdWJ0ZXh0IGE6dmlzaXRlZCB7IGNvbG9yOiM4MjgyODI7IH0KLmNvbWhlYWQgYTpob3ZlciB7IHRleHQtZGVjb3JhdGlvbjp1bmRlcmxpbmU7IH0KCi5obm1vcmUgYTpsaW5rLCBhOnZpc2l0ZWQgeyBjb2xvcjojODI4MjgyOyB9Ci5obm1vcmUgeyB0ZXh0LWRlY29yYXRpb246dW5kZXJsaW5lOyB9CgouZGVmYXVsdCBwIHsgbWFyZ2luLXRvcDogOHB4OyBtYXJnaW4tYm90dG9tOiAwcHg7IH0KCi5wYWdlYnJlYWsge3BhZ2UtYnJlYWstYmVmb3JlOmFsd2F5c30KCnByZSB7IG92ZXJmbG93OiBhdXRvOyBwYWRkaW5nOiAycHg7IHdoaXRlLXNwYWNlOiBwcmUtd3JhcDsgb3ZlcmZsb3ctd3JhcDphbnl3aGVyZTsgfQpwcmU6aG92ZXIgeyBvdmVyZmxvdzphdXRvIH0KCi52b3RlYXJyb3cgewogIHdpZHRoOiAgICAgIDEwcHg7CiAgaGVpZ2h0OiAgICAgMTBweDsKICBib3JkZXI6ICAgICAwcHg7CiAgbWFyZ2luOiAgICAgM3B4IDJweCA2cHg7CiAgYmFja2dyb3VuZDogdXJsKCJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUJvWldsbmFIUTlJak15SWlCMmFXVjNRbTk0UFNJd0lEQWdNeklnTVRZaUlIZHBaSFJvUFNJek1pSWdlRzFzYm5NOUltaDBkSEE2THk5M2QzY3Vkek11YjNKbkx6SXdNREF2YzNabklqNDhjR0YwYUNCa1BTSnRNaUF5TnlBeE5DMHlPU0F4TkNBeU9Yb2lJR1pwYkd3OUlpTTVPVGtpTHo0OEwzTjJaejQ9IiksIGxpbmVhci1ncmFkaWVudCh0cmFuc3BhcmVudCwgdHJhbnNwYXJlbnQpIG5vLXJlcGVhdDsKICBiYWNrZ3JvdW5kLXNpemU6IDEwcHg7Cn0KCi52b3RlbGlua3Mubm9zZWUgZGl2LnZvdGVhcnJvdy5yb3RhdGUxODAgewogIGRpc3BsYXk6IG5vbmU7Cn0KCnRhYmxlLnBhZHRhYiB0ZCB7IHBhZGRpbmc6MHB4IDEwcHggfQoKQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAoLXdlYmtpdC1taW4tZGV2aWNlLXBpeGVsLXJhdGlvOiAyKSwgb25seSBzY3JlZW4gYW5kIChtaW4tZGV2aWNlLXBpeGVsLXJhdGlvOiAyKSB7CiAgLnZvdGVhcnJvdyB7CiAgICBiYWNrZ3JvdW5kLXNpemU6IDEwcHg7CiAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEhOMlp5Qm9aV2xuYUhROUlqTXlJaUIyYVdWM1FtOTRQU0l3SURBZ016SWdNVFlpSUhkcFpIUm9QU0l6TWlJZ2VHMXNibk05SW1oMGRIQTZMeTkzZDNjdWR6TXViM0puTHpJd01EQXZjM1puSWo0OGNHRjBhQ0JrUFNKdE1pQXlOeUF4TkMweU9TQXhOQ0F5T1hvaUlHWnBiR3c5SWlNNU9Ua2lMejQ4TDNOMlp6ND0iKSwgbGluZWFyLWdyYWRpZW50KHRyYW5zcGFyZW50LCB0cmFuc3BhcmVudCk7CiAgfQp9Cgoucm90YXRlMTgwIHsKICAtd2Via2l0LXRyYW5zZm9ybTogcm90YXRlKDE4MGRlZyk7ICAvKiBDaHJvbWUgYW5kIG90aGVyIHdlYmtpdCBicm93c2VycyAqLwogIC1tb3otdHJhbnNmb3JtOiAgICByb3RhdGUoMTgwZGVnKTsgIC8qIEZGICovCiAgLW8tdHJhbnNmb3JtOiAgICAgIHJvdGF0ZSgxODBkZWcpOyAgLyogT3BlcmEgKi8KICAtbXMtdHJhbnNmb3JtOiAgICAgcm90YXRlKDE4MGRlZyk7ICAvKiBJRTkgKi8KICB0cmFuc2Zvcm06ICAgICAgICAgcm90YXRlKDE4MGRlZyk7ICAvKiBXM0MgY29tcGxhaW50IGJyb3dzZXJzICovCgogIC8qIElFOCBhbmQgYmVsb3cgKi8KICAtbXMtZmlsdGVyOiAicHJvZ2lkOkRYSW1hZ2VUcmFuc2Zvcm0uTWljcm9zb2Z0Lk1hdHJpeChNMTE9LTEsIE0xMj0wLCBNMjE9MCwgTTIyPS0xLCBEWD0wLCBEWT0wLCBTaXppbmdNZXRob2Q9J2F1dG8gZXhwYW5kJykiOwp9CgovKiBtb2JpbGUgZGV2aWNlICovCkBtZWRpYSBvbmx5IHNjcmVlbgphbmQgKG1pbi13aWR0aCA6IDMwMHB4KQphbmQgKG1heC13aWR0aCA6IDc1MHB4KSB7CiAgI2hubWFpbiB7IHdpZHRoOiAxMDAlOyBtaW4td2lkdGg6IDA7IH0KICBib2R5IHsgcGFkZGluZzogMDsgbWFyZ2luOiAwOyB3aWR0aDogMTAwJTsgfQogIHRkIHsgaGVpZ2h0OiBpbmhlcml0ICFpbXBvcnRhbnQ7IH0KICAudGl0bGUsIC5jb21tZW50IHsgZm9udC1zaXplOiBpbmhlcml0OyAgfQogIHNwYW4ucGFnZXRvcCB7IGRpc3BsYXk6IGJsb2NrOyBtYXJnaW46IDNweCA1cHg7IGZvbnQtc2l6ZTogMTJweDsgbGluZS1oZWlnaHQ6IG5vcm1hbCB9CiAgc3Bhbi5wYWdldG9wIGIgeyBkaXNwbGF5OiBibG9jazsgZm9udC1zaXplOiAxNXB4OyB9CiAgdGFibGUuY29tbWVudC10cmVlIC5jb21tZW50IGEgeyBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IG1heC13aWR0aDogMjAwcHg7IG92ZXJmbG93OiBoaWRkZW47IHdoaXRlLXNwYWNlOiBub3dyYXA7CiAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpczsgdmVydGljYWwtYWxpZ246dG9wOyB9CiAgaW1nW3NyYz0icy5naWYiXVt3aWR0aD0iNDAiXSB7IHdpZHRoOiAxMnB4OyB9CiAgaW1nW3NyYz0icy5naWYiXVt3aWR0aD0iODAiXSB7IHdpZHRoOiAyNHB4OyB9CiAgaW1nW3NyYz0icy5naWYiXVt3aWR0aD0iMTIwIl0geyB3aWR0aDogMzZweDsgfQogIGltZ1tzcmM9InMuZ2lmIl1bd2lkdGg9IjE2MCJdIHsgd2lkdGg6IDQ4cHg7IH0KICBpbWdbc3JjPSJzLmdpZiJdW3dpZHRoPSIyMDAiXSB7IHdpZHRoOiA2MHB4OyB9CiAgaW1nW3NyYz0icy5naWYiXVt3aWR0aD0iMjQwIl0geyB3aWR0aDogNzJweDsgfQogIGltZ1tzcmM9InMuZ2lmIl1bd2lkdGg9IjI4MCJdIHsgd2lkdGg6IDg0cHg7IH0KICBpbWdbc3JjPSJzLmdpZiJdW3dpZHRoPSIzMjAiXSB7IHdpZHRoOiA5NnB4OyB9CiAgaW1nW3NyYz0icy5naWYiXVt3aWR0aD0iMzYwIl0geyB3aWR0aDogMTA4cHg7IH0KICBpbWdbc3JjPSJzLmdpZiJdW3dpZHRoPSI0MDAiXSB7IHdpZHRoOiAxMjBweDsgfQogIGltZ1tzcmM9InMuZ2lmIl1bd2lkdGg9IjQ0MCJdIHsgd2lkdGg6IDEzMnB4OyB9CiAgaW1nW3NyYz0icy5naWYiXVt3aWR0aD0iNDgwIl0geyB3aWR0aDogMTQ0cHg7IH0KICBpbWdbc3JjPSJzLmdpZiJdW3dpZHRoPSI1MjAiXSB7IHdpZHRoOiAxNTZweDsgfQogIGltZ1tzcmM9InMuZ2lmIl1bd2lkdGg9IjU2MCJdIHsgd2lkdGg6IDE2OHB4OyB9CiAgaW1nW3NyYz0icy5naWYiXVt3aWR0aD0iNjAwIl0geyB3aWR0aDogMTgwcHg7IH0KICBpbWdbc3JjPSJzLmdpZiJdW3dpZHRoPSI2NDAiXSB7IHdpZHRoOiAxOTJweDsgfQogIGltZ1tzcmM9InMuZ2lmIl1bd2lkdGg9IjY4MCJdIHsgd2lkdGg6IDIwNHB4OyB9CiAgaW1nW3NyYz0icy5naWYiXVt3aWR0aD0iNzIwIl0geyB3aWR0aDogMjE2cHg7IH0KICBpbWdbc3JjPSJzLmdpZiJdW3dpZHRoPSI3NjAiXSB7IHdpZHRoOiAyMjhweDsgfQogIGltZ1tzcmM9InMuZ2lmIl1bd2lkdGg9IjgwMCJdIHsgd2lkdGg6IDI0MHB4OyB9CiAgaW1nW3NyYz0icy5naWYiXVt3aWR0aD0iODQwIl0geyB3aWR0aDogMjUycHg7IH0KICAudGl0bGUgeyBmb250LXNpemU6IDExcHQ7IGxpbmUtaGVpZ2h0OiAxNHB0OyAgfQogIC5zdWJ0ZXh0IHsgZm9udC1zaXplOiA5cHQ7IH0KICAudm90ZWFycm93IHsgdHJhbnNmb3JtOiBzY2FsZSgxLjMsMS4zKTsgbWFyZ2luLXJpZ2h0OiA2cHg7IH0KICAudm90ZWFycm93LnJvdGF0ZTE4MCB7CiAgICAtd2Via2l0LXRyYW5zZm9ybTogcm90YXRlKDE4MGRlZykgc2NhbGUoMS4zLDEuMyk7ICAvKiBDaHJvbWUgYW5kIG90aGVyIHdlYmtpdCBicm93c2VycyAqLwogICAgLW1vei10cmFuc2Zvcm06ICAgIHJvdGF0ZSgxODBkZWcpIHNjYWxlKDEuMywxLjMpOyAgLyogRkYgKi8KICAgIC1vLXRyYW5zZm9ybTogICAgICByb3RhdGUoMTgwZGVnKSBzY2FsZSgxLjMsMS4zKTsgIC8qIE9wZXJhICovCiAgICAtbXMtdHJhbnNmb3JtOiAgICAgcm90YXRlKDE4MGRlZykgc2NhbGUoMS4zLDEuMyk7ICAvKiBJRTkgKi8KICAgIHRyYW5zZm9ybTogICAgICAgICByb3RhdGUoMTgwZGVnKSBzY2FsZSgxLjMsMS4zKTsgIC8qIFczQyBjb21wbGFpbnQgYnJvd3NlcnMgKi8KICB9CiAgLnZvdGVsaW5rcyB7IG1pbi13aWR0aDogMThweDsgfQogIC52b3RlbGlua3MgYSB7IGRpc3BsYXk6IGJsb2NrOyBtYXJnaW4tYm90dG9tOiA5cHg7IH0KICBpbnB1dFt0eXBlPSJ0ZXh0Il0sIGlucHV0W3R5cGU9Im51bWJlciJdLCB0ZXh0YXJlYSB7IGZvbnQtc2l6ZTogMTZweDsgd2lkdGg6IDkwJTsgfQp9CgouY29tbWVudCB7IG1heC13aWR0aDogMTIxNXB4OyBvdmVyZmxvdy13cmFwOmFueXdoZXJlOyB9CgoKCkBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1pbi13aWR0aCA6IDMwMHB4KSBhbmQgKG1heC13aWR0aCA6IDM4OXB4KSB7CiAgLmNvbW1lbnQgeyBtYXgtd2lkdGg6IDI3MHB4OyBvdmVyZmxvdzogaGlkZGVuIH0KfQpAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtaW4td2lkdGggOiAzOTBweCkgYW5kIChtYXgtd2lkdGggOiA1MDlweCkgewogIC5jb21tZW50IHsgbWF4LXdpZHRoOiAzNTBweDsgb3ZlcmZsb3c6IGhpZGRlbiB9Cn0KQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWluLXdpZHRoIDogNTEwcHgpIGFuZCAobWF4LXdpZHRoIDogNTk5cHgpIHsKICAuY29tbWVudCB7IG1heC13aWR0aDogNDYwcHg7IG92ZXJmbG93OiBoaWRkZW4gfQp9CkBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1pbi13aWR0aCA6IDYwMHB4KSBhbmQgKG1heC13aWR0aCA6IDY4OXB4KSB7CiAgLmNvbW1lbnQgeyBtYXgtd2lkdGg6IDU0MHB4OyBvdmVyZmxvdzogaGlkZGVuIH0KfQpAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtaW4td2lkdGggOiA2OTBweCkgYW5kIChtYXgtd2lkdGggOiA4MDlweCkgewogIC5jb21tZW50IHsgbWF4LXdpZHRoOiA2MjBweDsgb3ZlcmZsb3c6IGhpZGRlbiB9Cn0KQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWluLXdpZHRoIDogODEwcHgpIGFuZCAobWF4LXdpZHRoIDogODk5cHgpIHsKICAuY29tbWVudCB7IG1heC13aWR0aDogNzMwcHg7IG92ZXJmbG93OiBoaWRkZW4gfQp9CkBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1pbi13aWR0aCA6IDkwMHB4KSBhbmQgKG1heC13aWR0aCA6IDEwNzlweCkgewogIC5jb21tZW50IHsgbWF4LXdpZHRoOiA4MTBweDsgb3ZlcmZsb3c6IGhpZGRlbiB9Cn0KQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWluLXdpZHRoIDogMTA4MHB4KSBhbmQgKG1heC13aWR0aCA6IDExNjlweCkgewogIC5jb21tZW50IHsgbWF4LXdpZHRoOiA5NzBweDsgb3ZlcmZsb3c6IGhpZGRlbiB9Cn0KQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWluLXdpZHRoIDogMTE3MHB4KSBhbmQgKG1heC13aWR0aCA6IDEyNTlweCkgewogIC5jb21tZW50IHsgbWF4LXdpZHRoOiAxMDUwcHg7IG92ZXJmbG93OiBoaWRkZW4gfQp9CkBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1pbi13aWR0aCA6IDEyNjBweCkgYW5kIChtYXgtd2lkdGggOiAxMzQ5cHgpIHsKICAuY29tbWVudCB7IG1heC13aWR0aDogMTEzMHB4OyBvdmVyZmxvdzogaGlkZGVuIH0KfQo=">
        <link rel="icon" href="data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjE4IiB2aWV3Qm94PSI0IDQgMTg4IDE4OCIgd2lkdGg9IjE4IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Im00IDRoMTg4djE4OGgtMTg4eiIgZmlsbD0iI2Y2MCIvPjxwYXRoIGQ9Im03My4yNTIxNzU2IDQ1LjAxIDIyLjc0NzgyNDQgNDcuMzkxMzAwODMgMjIuNzQ3ODI0NC00Ny4zOTEzMDA4M2gxOS41NjU2OTYzMWwtMzQuMzIzNTIwNzEgNjQuNDg2NjE0Njh2NDEuNDkzMzg1MzJoLTE1Ljk4di00MS40OTMzODUzMmwtMzQuMzIzNTIwNzEtNjQuNDg2NjE0Njh6IiBmaWxsPSIjZmZmIi8+PC9zdmc+">
    <link rel="canonical" href="https://news.ycombinator.com/item?id=37097775">            <title>Can you use a class in C? | Hacker News</title><meta name="robots" content="none"></meta></head><body><center><table id="hnmain" border="0" cellpadding="0" cellspacing="0" width="85%" bgcolor="#f6f6ef">
        <tbody><tr><td bgcolor="#ff6600"><table border="0" cellpadding="0" cellspacing="0" width="100%" style="padding:2px"><tbody><tr><td style="width:18px;padding-right:4px"><a href="https://news.ycombinator.com"><img src="data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjE4IiB2aWV3Qm94PSI0IDQgMTg4IDE4OCIgd2lkdGg9IjE4IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Im00IDRoMTg4djE4OGgtMTg4eiIgZmlsbD0iI2Y2MCIvPjxwYXRoIGQ9Im03My4yNTIxNzU2IDQ1LjAxIDIyLjc0NzgyNDQgNDcuMzkxMzAwODMgMjIuNzQ3ODI0NC00Ny4zOTEzMDA4M2gxOS41NjU2OTYzMWwtMzQuMzIzNTIwNzEgNjQuNDg2NjE0Njh2NDEuNDkzMzg1MzJoLTE1Ljk4di00MS40OTMzODUzMmwtMzQuMzIzNTIwNzEtNjQuNDg2NjE0Njh6IiBmaWxsPSIjZmZmIi8+PC9zdmc+" width="18" height="18" style="border:1px white solid; display:block"></a></td>
                  <td style="line-height:12pt; height:10px;"><span class="pagetop"><b class="hnname"><a href="https://news.ycombinator.com/news">Hacker News</a></b>
                            <a href="https://news.ycombinator.com/newest">new</a> | <a href="https://news.ycombinator.com/front">past</a> | <a href="https://news.ycombinator.com/newcomments">comments</a> | <a href="https://news.ycombinator.com/ask">ask</a> | <a href="https://news.ycombinator.com/show">show</a> | <a href="https://news.ycombinator.com/jobs">jobs</a> | <a href="https://news.ycombinator.com/submit" rel="nofollow">submit</a>            </span></td><td style="text-align:right;padding-right:4px;"><span class="pagetop">
                              <a href="https://news.ycombinator.com/login?goto=item%3Fid%3D37097775">login</a>
                          </span></td>
              </tr></tbody></table></td></tr>
<tr id="pagespace" title="Can you use a class in C?" style="height:10px"></tr><tr><td><table class="fatitem" border="0">
        <tbody><tr class="athing submission" id="37097775">
      <td align="right" valign="top" class="title"><span class="rank"></span></td>      <td valign="top" class="votelinks"><center><a id="up_37097775" href="https://news.ycombinator.com/vote?id=37097775&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center></td><td class="title"><span class="titleline"><a href="https://d4ckard.github.io/2023/08/11/can-you-use-a-class-in-c/">Can you use a class in C?</a><span class="sitebit comhead"> (<a href="https://news.ycombinator.com/from?site=d4ckard.github.io"><span class="sitestr">d4ckard.github.io</span></a>)</span></span></td></tr><tr><td colspan="2"></td><td class="subtext"><span class="subline">
          <span class="score" id="score_37097775">94 points</span> by <a href="https://news.ycombinator.com/user?id=D4ckard" class="hnuser">D4ckard</a> <span class="age" title="2023-08-12T07:05:04 1691823904"><a href="https://news.ycombinator.com/item?id=37097775">on Aug 13, 2023</a></span> <span id="unv_37097775"></span> | <a href="https://news.ycombinator.com/hide?id=37097775&amp;goto=item%3Fid%3D37097775">hide</a> | <a href="https://hn.algolia.com/?query=Can%20you%20use%20a%20class%20in%20C%3F&amp;type=story&amp;dateRange=all&amp;sort=byDate&amp;storyText=false&amp;prefix&amp;page=0" class="hnpast">past</a> | <a href="https://news.ycombinator.com/fave?id=37097775&amp;auth=ea671ec7ae1d5cb5cd36ed0a2ad0c95a5655fc1d">favorite</a> | <a href="https://news.ycombinator.com/item?id=37097775">79&nbsp;comments</a>        </span>
              </td></tr>
        </tbody></table><br><br><table border="0" class="comment-tree">
            <tbody><tr class="athing comtr" id="37108987"><td><table border="0">  <tbody><tr>    <td class="ind" indent="0"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="0"></td><td valign="top" class="votelinks">
      <center><a id="up_37108987" href="https://news.ycombinator.com/vote?id=37108987&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=grumblingdev" class="hnuser">grumblingdev</a> <span class="age" title="2023-08-13T11:43:17 1691926997"><a href="https://news.ycombinator.com/item?id=37108987">on Aug 13, 2023</a></span> <span id="unv_37108987"></span>          <span class="navs">
             | <a href="#37108596" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37108987" n="34" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">It took me a long time to realize that I actually prefer not using classes.<p>It's the small things in programming that can make a huge difference. It always felt like I should be using the C++ way because it was slightly dry-er and looked nicer, and I could have all these OO features.</p><p>Like when you see `int get_numer(void *r)` or Python's `def get_numer(self)`, or Go's `func (rational *Rational) GetNumer() (n int)`, you think: "how silly, why does the object pointer need to be in scope, just use `this`". But this tiny thing is liberating. It allows you to see that everything is just functions operating on data. And that a "method", is just a function that is taking _the entire object_ as a parameter...and hence a dependency. Which allows you to think: hmm, does this function really need to depend on the entire object...maybe it can be a separate utility function all by itself without any connection to the class. And maybe it doesn't actually need access to any of the other functions in the class...and maybe the class could be split up...etc.</p><p>I just watched a [talk](1) by Alan Kay the inventor of SmallTalk and the phrase "object-oriented" who never stops shitting on C++.</p><p>Yet OO is still absolutely everywhere.</p><p>[1]: <a href="https://www.youtube.com/watch?v=oKg1hTOQXoY">https://www.youtube.com/watch?v=oKg1hTOQXoY</a></p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="37109238"><td><table border="0">  <tbody><tr>    <td class="ind" indent="1"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="40"></td><td valign="top" class="votelinks">
      <center><a id="up_37109238" href="https://news.ycombinator.com/vote?id=37109238&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=rezonant" class="hnuser">rezonant</a> <span class="age" title="2023-08-13T12:17:40 1691929060"><a href="https://news.ycombinator.com/item?id=37109238">on Aug 13, 2023</a></span> <span id="unv_37109238"></span>          <span class="navs">
             | <a href="#37108987" class="clicky" aria-hidden="true">parent</a> | <a href="#37110164" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37109238" n="3" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">Alan Kay isn't going to agree that you should simply pass structures around and use element-level  procedures. Message passing as a concept is a higher order version of what you see in C++, not what you see in C. A big reason Kay dislikes C++ is because it doesn't go far <i>enough</i> in terms of dynamic dispatch and the ability to substitute implementations dynamically at runtime. One way to put it is: C++ makes decisions at compile time that should be made at runtime.<p>What you are saying certainly applies neatly to getters and setters, but consider that classes are used for far more complex use cases than as a simple data holder. Indeed, if all you need is to store two integer components, you might not need a class.</p><p>Of course, in Smalltalk and it's ilk, you only have objects. So there is no opportunity to access data from within a structure (externally) without passing messages.</p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="37109423"><td><table border="0">  <tbody><tr>    <td class="ind" indent="2"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="80"></td><td valign="top" class="votelinks">
      <center><a id="up_37109423" href="https://news.ycombinator.com/vote?id=37109423&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=chadcmulligan" class="hnuser">chadcmulligan</a> <span class="age" title="2023-08-13T12:42:39 1691930559"><a href="https://news.ycombinator.com/item?id=37109423">on Aug 13, 2023</a></span> <span id="unv_37109423"></span>          <span class="navs">
             | <a href="#37108987" class="clicky" aria-hidden="true">root</a> | <a href="#37109238" class="clicky" aria-hidden="true">parent</a> | <a href="#37118363" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37109423" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">Indeed, and C++ was initially a preprocessor (CFront) by Stroustrup, dynamic dispatch was considered too slow at the time, so c++ style objects and methods were faster and as a faster version of simula [1]. Objective C was an alternative that used something closer to smalltalk but it was slower and a few years later. C++ was first released in 1983 internally at AT&amp;T, and for perspective, the 286 was released around the same time with a clock speed of 8 MHz.<p>[1] <a href="https://en.wikipedia.org/wiki/C%2B%2B" rel="nofollow noreferrer">https://en.wikipedia.org/wiki/C%2B%2B</a></p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
            <tr class="athing comtr" id="37118363"><td><table border="0">  <tbody><tr>    <td class="ind" indent="2"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="80"></td><td valign="top" class="votelinks">
      <center><a id="up_37118363" href="https://news.ycombinator.com/vote?id=37118363&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=up2isomorphism" class="hnuser">up2isomorphism</a> <span class="age" title="2023-08-14T07:24:47 1691997887"><a href="https://news.ycombinator.com/item?id=37118363">on Aug 14, 2023</a></span> <span id="unv_37118363"></span>          <span class="navs">
             | <a href="#37108987" class="clicky" aria-hidden="true">root</a> | <a href="#37109238" class="clicky" aria-hidden="true">parent</a> | <a href="#37109423" class="clicky" aria-hidden="true">prev</a> | <a href="#37110164" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37118363" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">What he has said applies to any member functions. It is a nuance to have to add a parameter, but certainly it does not only apply to getter and setters.<p>Dynamic dispatchinga are not necessarily evil, but that also doesn’t exclude C. Not sure how this idea C++ is inherently more dynamic or static comes from. For a ling time you can implement all the dynamic behavior of C++ in C, and it took C++ ‘s template as expressive as C macros.</p><p>Sometimes, less is more.that’s where C++ never gets right.</p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                  <tr class="athing comtr" id="37110164"><td><table border="0">  <tbody><tr>    <td class="ind" indent="1"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="40"></td><td valign="top" class="votelinks">
      <center><a id="up_37110164" href="https://news.ycombinator.com/vote?id=37110164&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=stabbles" class="hnuser">stabbles</a> <span class="age" title="2023-08-13T14:07:25 1691935645"><a href="https://news.ycombinator.com/item?id=37110164">on Aug 13, 2023</a></span> <span id="unv_37110164"></span>          <span class="navs">
             | <a href="#37108987" class="clicky" aria-hidden="true">parent</a> | <a href="#37109238" class="clicky" aria-hidden="true">prev</a> | <a href="#37109129" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37110164" n="5" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">Also Bjarne Strostroup said that this (pun intended) was a mistake, since often there is no "most important" object.<p>If you want to do generic programming, it's much better to write f(a, b) instead of a.f(b).</p><p>Suppose I'm writing a generic algorithm that needs some function distance(A a, B b) for generic A and B. Distance is probably a commutative function, why would a.distance(b) be better than b.distance(a)? It's arbitrary.</p><p>Secondly, if functions are first-class citizens, and I don't "own" the types A and B, it's much easier to implement distance(A a, B b) myself than it is to extend the types A and B with a member function `distance`.</p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="37113247"><td><table border="0">  <tbody><tr>    <td class="ind" indent="2"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="80"></td><td valign="top" class="votelinks">
      <center><a id="up_37113247" href="https://news.ycombinator.com/vote?id=37113247&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=bobboies" class="hnuser">bobboies</a> <span class="age" title="2023-08-13T19:16:05 1691954165"><a href="https://news.ycombinator.com/item?id=37113247">on Aug 13, 2023</a></span> <span id="unv_37113247"></span>          <span class="navs">
             | <a href="#37108987" class="clicky" aria-hidden="true">root</a> | <a href="#37110164" class="clicky" aria-hidden="true">parent</a> | <a href="#37110528" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37113247" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">Also see:<p>Effective C++ (by Scott Meyers) Item 23:</p><p>“Prefer non-member non-friend functions to member functions. Doing so increases encapsulation, packaging flexibility, and functional extensibility.”</p><p>The text has a lot more detail but that’s a brief summary. Folks just need to read the literature then this sort of knowledge would be in common use.</p><p>One downside of language evolution is a lot of people focusing on new language features, etc, but then some of this older, important knowledge gets skipped over.</p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
            <tr class="athing comtr" id="37110528"><td><table border="0">  <tbody><tr>    <td class="ind" indent="2"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="80"></td><td valign="top" class="votelinks">
      <center><a id="up_37110528" href="https://news.ycombinator.com/vote?id=37110528&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=commonlisp94" class="hnuser">commonlisp94</a> <span class="age" title="2023-08-13T14:48:15 1691938095"><a href="https://news.ycombinator.com/item?id=37110528">on Aug 13, 2023</a></span> <span id="unv_37110528"></span>          <span class="navs">
             | <a href="#37108987" class="clicky" aria-hidden="true">root</a> | <a href="#37110164" class="clicky" aria-hidden="true">parent</a> | <a href="#37113247" class="clicky" aria-hidden="true">prev</a> | <a href="#37115763" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37110528" n="2" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">It would make a huge difference if that style were used more in practice.<p>OOP is just functions that are only polymorphic in 1 argument, when you want it on all of them.</p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="37110618"><td><table border="0">  <tbody><tr>    <td class="ind" indent="3"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="120"></td><td valign="top" class="votelinks">
      <center><a id="up_37110618" href="https://news.ycombinator.com/vote?id=37110618&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=coldtea" class="hnuser">coldtea</a> <span class="age" title="2023-08-13T14:59:48 1691938788"><a href="https://news.ycombinator.com/item?id=37110618">on Aug 13, 2023</a></span> <span id="unv_37110618"></span>          <span class="navs">
             | <a href="#37108987" class="clicky" aria-hidden="true">root</a> | <a href="#37110528" class="clicky" aria-hidden="true">parent</a> | <a href="#37115763" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37110618" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">Multiple dispatch for the win...</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                  <tr class="athing comtr" id="37115763"><td><table border="0">  <tbody><tr>    <td class="ind" indent="2"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="80"></td><td valign="top" class="votelinks">
      <center><a id="up_37115763" href="https://news.ycombinator.com/vote?id=37115763&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=iraqmtpizza" class="hnuser">iraqmtpizza</a> <span class="age" title="2023-08-13T23:42:25 1691970145"><a href="https://news.ycombinator.com/item?id=37115763">on Aug 13, 2023</a></span> <span id="unv_37115763"></span>          <span class="navs">
             | <a href="#37108987" class="clicky" aria-hidden="true">root</a> | <a href="#37110164" class="clicky" aria-hidden="true">parent</a> | <a href="#37110528" class="clicky" aria-hidden="true">prev</a> | <a href="#37109129" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37115763" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">is it not apparent that a.distance(b) and b.distance(a) should both exist? if they don't, the API is poorly designed</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                  <tr class="athing comtr" id="37109129"><td><table border="0">  <tbody><tr>    <td class="ind" indent="1"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="40"></td><td valign="top" class="votelinks">
      <center><a id="up_37109129" href="https://news.ycombinator.com/vote?id=37109129&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=Waterluvian" class="hnuser">Waterluvian</a> <span class="age" title="2023-08-13T12:05:57 1691928357"><a href="https://news.ycombinator.com/item?id=37109129">on Aug 13, 2023</a></span> <span id="unv_37109129"></span>          <span class="navs">
             | <a href="#37108987" class="clicky" aria-hidden="true">parent</a> | <a href="#37110164" class="clicky" aria-hidden="true">prev</a> | <a href="#37109030" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37109129" n="2" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">This is why I like Rust’s associated functions concept. It is just functions and data. But with organization of clear relationships.  “These functions act on these data.” (And a bit of syntactic sugar)</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="37114548"><td><table border="0">  <tbody><tr>    <td class="ind" indent="2"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="80"></td><td valign="top" class="votelinks">
      <center><a id="up_37114548" href="https://news.ycombinator.com/vote?id=37114548&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=diarrhea" class="hnuser">diarrhea</a> <span class="age" title="2023-08-13T21:12:02 1691961122"><a href="https://news.ycombinator.com/item?id=37114548">on Aug 13, 2023</a></span> <span id="unv_37114548"></span>          <span class="navs">
             | <a href="#37108987" class="clicky" aria-hidden="true">root</a> | <a href="#37109129" class="clicky" aria-hidden="true">parent</a> | <a href="#37109030" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37114548" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">One disadvantage here is taking the entire struct on each operation even if only a single part of it is needed. That can be much harder to deal with due to ownership rules (if &amp;Mut self or all of self is taken). Free functions can be easier then.</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                  <tr class="athing comtr" id="37109030"><td><table border="0">  <tbody><tr>    <td class="ind" indent="1"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="40"></td><td valign="top" class="votelinks">
      <center><a id="up_37109030" href="https://news.ycombinator.com/vote?id=37109030&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=danhau" class="hnuser">danhau</a> <span class="age" title="2023-08-13T11:52:43 1691927563"><a href="https://news.ycombinator.com/item?id=37109030">on Aug 13, 2023</a></span> <span id="unv_37109030"></span>          <span class="navs">
             | <a href="#37108987" class="clicky" aria-hidden="true">parent</a> | <a href="#37109129" class="clicky" aria-hidden="true">prev</a> | <a href="#37117436" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37109030" n="3" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">Thank you. You put into words what I was thinking.<p>The best paradigm in programming has to be procedural style. The cleanest code I’ve written and read has always been procedural. I even maintain a monster VBA Word Macro at work and - after some much needed refactoring - its pretty easy to understand (ignoring VBA’s warts).</p><p>The flow of logic and dependencies on data is much easier to follow in procedural.</p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="37110208"><td><table border="0">  <tbody><tr>    <td class="ind" indent="2"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="80"></td><td valign="top" class="votelinks">
      <center><a id="up_37110208" href="https://news.ycombinator.com/vote?id=37110208&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=thewix" class="hnuser">thewix</a> <span class="age" title="2023-08-13T14:13:23 1691936003"><a href="https://news.ycombinator.com/item?id=37110208">on Aug 13, 2023</a></span> <span id="unv_37110208"></span>          <span class="navs">
             | <a href="#37108987" class="clicky" aria-hidden="true">root</a> | <a href="#37109030" class="clicky" aria-hidden="true">parent</a> | <a href="#37117436" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37110208" n="2" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">I prefer functional. Procedural is not restrained enough and allows for mutable global state. This can go off the rails when multiple people are in the code.<p>Functional stresses composition so functions should stay small, and ADTs allow for all effects (errors!) to be represented. Strong typing helps reduce the number of tests I need to write, as well.</p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="37114578"><td><table border="0">  <tbody><tr>    <td class="ind" indent="3"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="120"></td><td valign="top" class="votelinks">
      <center><a id="up_37114578" href="https://news.ycombinator.com/vote?id=37114578&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=diarrhea" class="hnuser">diarrhea</a> <span class="age" title="2023-08-13T21:14:36 1691961276"><a href="https://news.ycombinator.com/item?id=37114578">on Aug 13, 2023</a></span> <span id="unv_37114578"></span>          <span class="navs">
             | <a href="#37108987" class="clicky" aria-hidden="true">root</a> | <a href="#37110208" class="clicky" aria-hidden="true">parent</a> | <a href="#37117436" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37114578" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">I think ADTs and effects system are orthogonal though. A “print” has an effect but I don’t know of languages where failure of that is propagated (for example in Rust, println doesn’t evaluate to Result).</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                        <tr class="athing comtr" id="37117436"><td><table border="0">  <tbody><tr>    <td class="ind" indent="1"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="40"></td><td valign="top" class="votelinks">
      <center><a id="up_37117436" href="https://news.ycombinator.com/vote?id=37117436&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=rewgs" class="hnuser">rewgs</a> <span class="age" title="2023-08-14T04:23:18 1691986998"><a href="https://news.ycombinator.com/item?id=37117436">on Aug 14, 2023</a></span> <span id="unv_37117436"></span>          <span class="navs">
             | <a href="#37108987" class="clicky" aria-hidden="true">parent</a> | <a href="#37109030" class="clicky" aria-hidden="true">prev</a> | <a href="#37112953" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37117436" n="2" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">I'm a self-taught programmer, and I'm the lone programmer at a small non-tech company. I've mostly learned by building, and by reading documentation on language features, libraries, etc when I get stuck. I was pretty aware of "tutorial hell" pretty early on and thus avoided it, which by proxy meant I avoided most OOP dogma. I probably worked a lot harder than necessary and reinvented the wheel a few times early on, but at this point I think I write decent code, though I admit I'm somewhat siloed (e.g. I've never been subjected to a professional code review).<p>I recently watched a talk on just what <i>precisely</i> Functional Programming is, and the whole time I just thought "wait, doesn't everyone do this? Isn't this just the <i>overwhelmingly</i> obvious way to write code?" Around the same time, I found myself running into some very OO projects, and simply couldn't understand the <i>actual</i> reason for all of the ceremony and ridiculous amounts of encapsulation. And this wasn't in Java, which of course is infamous for its seemingly infinite amount of ceremony -- this was the documentation of a widely-used GUI library for Python.</p><p>Like, to my mind, classes are useful when you need to create objects whose values are unknown, i.e. the analogy where the class is a "cookie cutter" which creates the cookies. Classes are perfectly fine for that use-case but by no means should it be that which forms the backbone of your project; my (admittedly limited) view is that stand-alone functions are far and away the lowest-overhead and reliable device for composing parts of a system.</p><p>I really get the feeling that OOP is sort of like how synths were in the 80s -- everyone just kinda lost their minds for a second and used them <i>everywhere,</i> whether it made sense for the music or not. But from what I can tell, OOP just isn't really the right paradigm for a whole bunch of projects, and often the design of the code vs the design of the <i>thing</i> feels like ramming a square peg into a round hole.</p><p>Edit: all that said, if the above smacks of the Dunning-Krueger effect, I'd love to be made aware of that.</p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="37151061"><td><table border="0">  <tbody><tr>    <td class="ind" indent="2"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="80"></td><td valign="top" class="votelinks">
      <center><a id="up_37151061" href="https://news.ycombinator.com/vote?id=37151061&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=grumblingdev" class="hnuser">grumblingdev</a> <span class="age" title="2023-08-16T18:02:45 1692208965"><a href="https://news.ycombinator.com/item?id=37151061">on Aug 16, 2023</a></span> <span id="unv_37151061"></span>          <span class="navs">
             | <a href="#37108987" class="clicky" aria-hidden="true">root</a> | <a href="#37117436" class="clicky" aria-hidden="true">parent</a> | <a href="#37112953" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37151061" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">Basic functional programming concepts are good, but it can easily go off the rails when people take it too far.</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                  <tr class="athing comtr" id="37112953"><td><table border="0">  <tbody><tr>    <td class="ind" indent="1"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="40"></td><td valign="top" class="votelinks">
      <center><a id="up_37112953" href="https://news.ycombinator.com/vote?id=37112953&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=38" class="hnuser">38</a> <span class="age" title="2023-08-13T18:53:39 1691952819"><a href="https://news.ycombinator.com/item?id=37112953">on Aug 13, 2023</a></span> <span id="unv_37112953"></span>          <span class="navs">
             | <a href="#37108987" class="clicky" aria-hidden="true">parent</a> | <a href="#37117436" class="clicky" aria-hidden="true">prev</a> | <a href="#37110193" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37112953" n="6" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">you cant reuse names with top line functions:<p></p><pre><code>    package hello
    
    type cat int
    
    func greet(c cat) cat {
       return c + 1
    }
    
    type dog string
    
    func greet(d dog) dog { // greet redeclared in this block
       return d + "one"
    }
</code></pre>
but you can with methods:<p></p><pre><code>    package hello
    
    type cat int
    
    func (c cat) greet() cat {
       return c + 1
    }
    
    type dog string
    
    func (d dog) greet() dog {
       return d + "one"
    }</code></pre></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="37114620"><td><table border="0">  <tbody><tr>    <td class="ind" indent="2"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="80"></td><td valign="top" class="votelinks">
      <center><a id="up_37114620" href="https://news.ycombinator.com/vote?id=37114620&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=diarrhea" class="hnuser">diarrhea</a> <span class="age" title="2023-08-13T21:18:11 1691961491"><a href="https://news.ycombinator.com/item?id=37114620">on Aug 13, 2023</a></span> <span id="unv_37114620"></span>          <span class="navs">
             | <a href="#37108987" class="clicky" aria-hidden="true">root</a> | <a href="#37112953" class="clicky" aria-hidden="true">parent</a> | <a href="#37110193" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37114620" n="5" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">I don’t think that’s a strong argument. It’s just function overloading that some languages enable, others don’t. Not a categorical difference.</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="37115130"><td><table border="0">  <tbody><tr>    <td class="ind" indent="3"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="120"></td><td valign="top" class="votelinks">
      <center><a id="up_37115130" href="https://news.ycombinator.com/vote?id=37115130&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=38" class="hnuser">38</a> <span class="age" title="2023-08-13T22:17:43 1691965063"><a href="https://news.ycombinator.com/item?id=37115130">on Aug 13, 2023</a></span> <span id="unv_37115130"></span>          <span class="navs">
             | <a href="#37108987" class="clicky" aria-hidden="true">root</a> | <a href="#37114620" class="clicky" aria-hidden="true">parent</a> | <a href="#37110193" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37115130" n="4" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">OK please show me the equivalent code in C then</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="37116407"><td><table border="0">  <tbody><tr>    <td class="ind" indent="4"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="160"></td><td valign="top" class="votelinks">
      <center><a id="up_37116407" href="https://news.ycombinator.com/vote?id=37116407&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=tredre3" class="hnuser">tredre3</a> <span class="age" title="2023-08-14T01:25:56 1691976356"><a href="https://news.ycombinator.com/item?id=37116407">on Aug 14, 2023</a></span> <span id="unv_37116407"></span>          <span class="navs">
             | <a href="#37108987" class="clicky" aria-hidden="true">root</a> | <a href="#37115130" class="clicky" aria-hidden="true">parent</a> | <a href="#37110193" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37116407" n="3" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">It's possible with _Generic but there's a lot of caveats. Any seasoned C dev would just have two functions with a prefix or suffix, like cat_greet() and dog_greet().<p>But if you insist, it would look something like:</p><p></p><pre><code>    typedef ... cat;
    typedef ... dog;

    void cat_greet(cat *obj) {/*do stuff */}

    void dog_greet(dog *obj) {/*do stuff */}

    #define greet(X) _Generic((X), cat: cat_greet, dog: dog_greet)(X)

    int main(...) 
    {
         cat mycat;
         dog mydog;
         greet(&amp;mycat);
         greet(&amp;mydog);
         return 0;
    }</code></pre></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="37116773"><td><table border="0">  <tbody><tr>    <td class="ind" indent="5"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="200"></td><td valign="top" class="votelinks">
      <center><a id="up_37116773" href="https://news.ycombinator.com/vote?id=37116773&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=38" class="hnuser">38</a> <span class="age" title="2023-08-14T02:23:07 1691979787"><a href="https://news.ycombinator.com/item?id=37116773">on Aug 14, 2023</a></span> <span id="unv_37116773"></span>          <span class="navs">
             | <a href="#37108987" class="clicky" aria-hidden="true">root</a> | <a href="#37116407" class="clicky" aria-hidden="true">parent</a> | <a href="#37110193" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37116773" n="2" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">that is really, really ugly. using methods, I dont have to mess with function prefixes, and I dont have to pollute the global scope.</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="37117953"><td><table border="0">  <tbody><tr>    <td class="ind" indent="6"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="240"></td><td valign="top" class="votelinks">
      <center><a id="up_37117953" href="https://news.ycombinator.com/vote?id=37117953&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=ElegantBeef" class="hnuser">ElegantBeef</a> <span class="age" title="2023-08-14T06:00:31 1691992831"><a href="https://news.ycombinator.com/item?id=37117953">on Aug 14, 2023</a></span> <span id="unv_37117953"></span>          <span class="navs">
             | <a href="#37108987" class="clicky" aria-hidden="true">root</a> | <a href="#37116773" class="clicky" aria-hidden="true">parent</a> | <a href="#37110193" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37117953" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">Again that's this language constraining you to that. With procedure overloading it's not required that you have to have that ugly API. For instance the following is valid Nim:<p></p><pre><code>  type
    Cat = object # these are just 'struct' in a different skin
    Dog = object

  proc greet(c: Cat): string = "Meow"
  proc greet(d: Dog): string = "Bark"

  assert Dog().greet() == "Bark"
  assert Cat().greet() == "Meow"</code></pre></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                                          <tr class="athing comtr" id="37110193"><td><table border="0">  <tbody><tr>    <td class="ind" indent="1"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="40"></td><td valign="top" class="votelinks">
      <center><a id="up_37110193" href="https://news.ycombinator.com/vote?id=37110193&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=mckravchyk" class="hnuser">mckravchyk</a> <span class="age" title="2023-08-13T14:11:30 1691935890"><a href="https://news.ycombinator.com/item?id=37110193">on Aug 13, 2023</a></span> <span id="unv_37110193"></span>          <span class="navs">
             | <a href="#37108987" class="clicky" aria-hidden="true">parent</a> | <a href="#37112953" class="clicky" aria-hidden="true">prev</a> | <a href="#37109627" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37110193" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">I have tried to sell myself on using functions (not pure functions though but ones that accept an object and modify it) but ultimately sticked to OO. I try to find the balance in-between, if something is processing heavy it's going to be a function, but if it does not do much by itself and relies on a lot of state, it's going to be a method in a class - which may call a function or a few.<p>The biggest benefit is the structure, you get an API that can control any aspect of the app out of the box without the need to redeclare stuff.</p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
            <tr class="athing comtr" id="37109627"><td><table border="0">  <tbody><tr>    <td class="ind" indent="1"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="40"></td><td valign="top" class="votelinks">
      <center><a id="up_37109627" href="https://news.ycombinator.com/vote?id=37109627&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=leeman2016" class="hnuser">leeman2016</a> <span class="age" title="2023-08-13T13:04:04 1691931844"><a href="https://news.ycombinator.com/item?id=37109627">on Aug 13, 2023</a></span> <span id="unv_37109627"></span>          <span class="navs">
             | <a href="#37108987" class="clicky" aria-hidden="true">parent</a> | <a href="#37110193" class="clicky" aria-hidden="true">prev</a> | <a href="#37110146" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37109627" n="3" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">How would you do DI abstractions using just functions? (Honest question)<p>I am so much used to the idea of swapping out functionality (set of functions and a state). For example, just recently I had to swap out an Excel spreadsheet reader/writer library in Go for performance reasons, and would have bled a lot (due to refactoring) had it not been encapsulated as an interface.</p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="37109651"><td><table border="0">  <tbody><tr>    <td class="ind" indent="2"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="80"></td><td valign="top" class="votelinks">
      <center><a id="up_37109651" href="https://news.ycombinator.com/vote?id=37109651&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=shortrounddev2" class="hnuser">shortrounddev2</a> <span class="age" title="2023-08-13T13:05:46 1691931946"><a href="https://news.ycombinator.com/item?id=37109651">on Aug 13, 2023</a></span> <span id="unv_37109651"></span>          <span class="navs">
             | <a href="#37108987" class="clicky" aria-hidden="true">root</a> | <a href="#37109627" class="clicky" aria-hidden="true">parent</a> | <a href="#37111019" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37109651" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">Function pointers in a struct</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
            <tr class="athing comtr" id="37111019"><td><table border="0">  <tbody><tr>    <td class="ind" indent="2"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="80"></td><td valign="top" class="votelinks">
      <center><a id="up_37111019" href="https://news.ycombinator.com/vote?id=37111019&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=winstonewert" class="hnuser">winstonewert</a> <span class="age" title="2023-08-13T15:47:06 1691941626"><a href="https://news.ycombinator.com/item?id=37111019">on Aug 13, 2023</a></span> <span id="unv_37111019"></span>          <span class="navs">
             | <a href="#37108987" class="clicky" aria-hidden="true">root</a> | <a href="#37109627" class="clicky" aria-hidden="true">parent</a> | <a href="#37109651" class="clicky" aria-hidden="true">prev</a> | <a href="#37110146" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37111019" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">How would either approach be different? In both cases you would have to rewrite the code that directly interacts with your Excel library.</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                  <tr class="athing comtr" id="37110146"><td><table border="0">  <tbody><tr>    <td class="ind" indent="1"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="40"></td><td valign="top" class="votelinks">
      <center><a id="up_37110146" href="https://news.ycombinator.com/vote?id=37110146&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=yCombLinks" class="hnuser">yCombLinks</a> <span class="age" title="2023-08-13T14:05:30 1691935530"><a href="https://news.ycombinator.com/item?id=37110146">on Aug 13, 2023</a></span> <span id="unv_37110146"></span>          <span class="navs">
             | <a href="#37108987" class="clicky" aria-hidden="true">parent</a> | <a href="#37109627" class="clicky" aria-hidden="true">prev</a> | <a href="#37112099" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37110146" n="2" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">And a well defined class defines the structure and valid permutations for that data in a clear and easy to find place.</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="37110189"><td><table border="0">  <tbody><tr>    <td class="ind" indent="2"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="80"></td><td valign="top" class="votelinks">
      <center><a id="up_37110189" href="https://news.ycombinator.com/vote?id=37110189&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=billfruit" class="hnuser">billfruit</a> <span class="age" title="2023-08-13T14:11:01 1691935861"><a href="https://news.ycombinator.com/item?id=37110189">on Aug 13, 2023</a></span> <span id="unv_37110189"></span>          <span class="navs">
             | <a href="#37108987" class="clicky" aria-hidden="true">root</a> | <a href="#37110146" class="clicky" aria-hidden="true">parent</a> | <a href="#37112099" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37110189" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">And allows to create any number of objects of its kind without explicitly needing to allocate memory for the objects. That is a major advantage I think, without that the code will get cluttered with all the memory allocation/deallocation going on explicitly.</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                  <tr class="athing comtr" id="37112099"><td><table border="0">  <tbody><tr>    <td class="ind" indent="1"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="40"></td><td valign="top" class="votelinks">
      <center><a id="up_37112099" href="https://news.ycombinator.com/vote?id=37112099&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=cryptonector" class="hnuser">cryptonector</a> <span class="age" title="2023-08-13T17:34:51 1691948091"><a href="https://news.ycombinator.com/item?id=37112099">on Aug 13, 2023</a></span> <span id="unv_37112099"></span>          <span class="navs">
             | <a href="#37108987" class="clicky" aria-hidden="true">parent</a> | <a href="#37110146" class="clicky" aria-hidden="true">prev</a> | <a href="#37113439" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37112099" n="5" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">Nowadays OO is seen as a mistake.<p>Interfaces are much better.  What's the difference?  It's this: no inheritance.</p><p>Still, with interfaces your complaints remain unsatisfied.  But add generic functions and then you can have the mix of OO-like and not-OO-like APIs you have in mind.</p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="37115810"><td><table border="0">  <tbody><tr>    <td class="ind" indent="2"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="80"></td><td valign="top" class="votelinks">
      <center><a id="up_37115810" href="https://news.ycombinator.com/vote?id=37115810&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=iraqmtpizza" class="hnuser">iraqmtpizza</a> <span class="age" title="2023-08-13T23:49:06 1691970546"><a href="https://news.ycombinator.com/item?id=37115810">on Aug 13, 2023</a></span> <span id="unv_37115810"></span>          <span class="navs">
             | <a href="#37108987" class="clicky" aria-hidden="true">root</a> | <a href="#37112099" class="clicky" aria-hidden="true">parent</a> | <a href="#37113439" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37115810" n="4" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">I don't want to imagine something like gson or sun.tools.tree without inheritance. That would be a disaster.<p>Composition? AssignShiftLeftExpression has-a AssignOpExpression which has-a BinaryAssignExpression which has-a BinaryExpression which has-a UnaryExpression which has-a Expression which has-a Node?</p><p></p><pre><code>    return this.assignOpExpression.binaryAssignExpression.binaryExpression.unaryExpression.expression.node.op;
</code></pre>
or<p></p><pre><code>    return this.op</code></pre></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="37117495"><td><table border="0">  <tbody><tr>    <td class="ind" indent="3"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="120"></td><td valign="top" class="votelinks">
      <center><a id="up_37117495" href="https://news.ycombinator.com/vote?id=37117495&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=cryptonector" class="hnuser">cryptonector</a> <span class="age" title="2023-08-14T04:35:58 1691987758"><a href="https://news.ycombinator.com/item?id=37117495">on Aug 14, 2023</a></span> <span id="unv_37117495"></span>          <span class="navs">
             | <a href="#37108987" class="clicky" aria-hidden="true">root</a> | <a href="#37115810" class="clicky" aria-hidden="true">parent</a> | <a href="#37113439" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37117495" n="3" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">You want "sum types", aka "algebraic types".</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="37117631"><td><table border="0">  <tbody><tr>    <td class="ind" indent="4"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="160"></td><td valign="top" class="votelinks">
      <center><a id="up_37117631" href="https://news.ycombinator.com/vote?id=37117631&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=iraqmtpizza" class="hnuser">iraqmtpizza</a> <span class="age" title="2023-08-14T05:01:28 1691989288"><a href="https://news.ycombinator.com/item?id=37117631">on Aug 14, 2023</a></span> <span id="unv_37117631"></span>          <span class="navs">
             | <a href="#37108987" class="clicky" aria-hidden="true">root</a> | <a href="#37117495" class="clicky" aria-hidden="true">parent</a> | <a href="#37113439" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37117631" n="2" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">I don't want them; you want them.</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="37126943"><td><table border="0">  <tbody><tr>    <td class="ind" indent="5"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="200"></td><td valign="top" class="votelinks">
      <center><a id="up_37126943" href="https://news.ycombinator.com/vote?id=37126943&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=cryptonector" class="hnuser">cryptonector</a> <span class="age" title="2023-08-14T21:19:44 1692047984"><a href="https://news.ycombinator.com/item?id=37126943">on Aug 14, 2023</a></span> <span id="unv_37126943"></span>          <span class="navs">
             | <a href="#37108987" class="clicky" aria-hidden="true">root</a> | <a href="#37117631" class="clicky" aria-hidden="true">parent</a> | <a href="#37113439" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37126943" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">Heh, it's a manner of speaking.  As in "the solution is to use sum types".  Obviously i can't make you want that.</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                                    <tr class="athing comtr" id="37113439"><td><table border="0">  <tbody><tr>    <td class="ind" indent="1"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="40"></td><td valign="top" class="votelinks">
      <center><a id="up_37113439" href="https://news.ycombinator.com/vote?id=37113439&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=bluGill" class="hnuser">bluGill</a> <span class="age" title="2023-08-13T19:32:00 1691955120"><a href="https://news.ycombinator.com/item?id=37113439">on Aug 13, 2023</a></span> <span id="unv_37113439"></span>          <span class="navs">
             | <a href="#37108987" class="clicky" aria-hidden="true">parent</a> | <a href="#37112099" class="clicky" aria-hidden="true">prev</a> | <a href="#37108596" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37113439" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">OO does not come from Smalltalk. Simula was the inspiration for OO in C++.</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                  <tr class="athing comtr" id="37108596"><td><table border="0">  <tbody><tr>    <td class="ind" indent="0"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="0"></td><td valign="top" class="votelinks">
      <center><a id="up_37108596" href="https://news.ycombinator.com/vote?id=37108596&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=flohofwoe" class="hnuser">flohofwoe</a> <span class="age" title="2023-08-13T10:38:58 1691923138"><a href="https://news.ycombinator.com/item?id=37108596">on Aug 13, 2023</a></span> <span id="unv_37108596"></span>          <span class="navs">
             | <a href="#37108987" class="clicky" aria-hidden="true">prev</a> | <a href="#37108875" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37108596" n="4" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">IME the best way to wrap C++ libraries for use in a C code base is to move at least one step higher then just wrapping every C++ class method with a C function (because this will result in an absolutely miserable C experience - you're basically writing C++ code in C, but without all the C++ syntax sugar).<p>Instead write a higher level module in C++ on top of the C++ library which implements some of the "application logic" and only exposes a very small app-specific (and non-OOP) C API to the rest of the application.</p><p>For instance with Dear ImGui I often write the entire UI code in C++ and then only expose a minimal C API which connects the UI code to the rest of the application (which is written in C).</p><p>Same with managing C++ object lifetimes, let the C++ side take care of this as much as possible, and don't expose pointers to C++ objects to the C side at all.</p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="37109263"><td><table border="0">  <tbody><tr>    <td class="ind" indent="1"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="40"></td><td valign="top" class="votelinks">
      <center><a id="up_37109263" href="https://news.ycombinator.com/vote?id=37109263&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=rezonant" class="hnuser">rezonant</a> <span class="age" title="2023-08-13T12:21:34 1691929294"><a href="https://news.ycombinator.com/item?id=37109263">on Aug 13, 2023</a></span> <span id="unv_37109263"></span>          <span class="navs">
             | <a href="#37108596" class="clicky" aria-hidden="true">parent</a> | <a href="#37108875" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37109263" n="3" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">I agree, with the caveat that given a heavy duty, large, and well-understood and -designed C++ API, the tradeoff of using a tool-generated wrapper might be worth it, even if such a wrapper may be more obtuse than one specifically considered by a human developer.</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="37109298"><td><table border="0">  <tbody><tr>    <td class="ind" indent="2"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="80"></td><td valign="top" class="votelinks">
      <center><a id="up_37109298" href="https://news.ycombinator.com/vote?id=37109298&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=flohofwoe" class="hnuser">flohofwoe</a> <span class="age" title="2023-08-13T12:25:46 1691929546"><a href="https://news.ycombinator.com/item?id=37109298">on Aug 13, 2023</a></span> <span id="unv_37109298"></span>          <span class="navs">
             | <a href="#37108596" class="clicky" aria-hidden="true">root</a> | <a href="#37109263" class="clicky" aria-hidden="true">parent</a> | <a href="#37108875" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37109298" n="2" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">&gt; well-understood and -designed C++ API<p>Unfortunately these seem to be quite rare (Dear ImGui is such a well-designed C++ API, and I actually also use the code-generated cimgui bindings more frequently now in my projects (haven't tried the 'new' official bindings yet). Interestingly the Dear ImGui C++ API is much closer to a typical "flat" C API than a typical class-based C++ API (Dear ImGui is mostly just a flat soup of functions wrapped in a namespace and with some mild overloading).</p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="37109333"><td><table border="0">  <tbody><tr>    <td class="ind" indent="3"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="120"></td><td valign="top" class="votelinks">
      <center><a id="up_37109333" href="https://news.ycombinator.com/vote?id=37109333&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=rezonant" class="hnuser">rezonant</a> <span class="age" title="2023-08-13T12:30:07 1691929807"><a href="https://news.ycombinator.com/item?id=37109333">on Aug 13, 2023</a></span> <span id="unv_37109333"></span>          <span class="navs">
             | <a href="#37108596" class="clicky" aria-hidden="true">root</a> | <a href="#37109298" class="clicky" aria-hidden="true">parent</a> | <a href="#37108875" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37109333" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">Very true. Designing the C API with intention can be a way to fix the mistakes sometimes :-)</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                              <tr class="athing comtr" id="37108875"><td><table border="0">  <tbody><tr>    <td class="ind" indent="0"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="0"></td><td valign="top" class="votelinks">
      <center><a id="up_37108875" href="https://news.ycombinator.com/vote?id=37108875&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=mtlmtlmtlmtl" class="hnuser">mtlmtlmtlmtl</a> <span class="age" title="2023-08-13T11:24:40 1691925880"><a href="https://news.ycombinator.com/item?id=37108875">on Aug 13, 2023</a></span> <span id="unv_37108875"></span>          <span class="navs">
             | <a href="#37108596" class="clicky" aria-hidden="true">prev</a> | <a href="#37108975" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37108875" n="9" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">Because all pointers are the same size in C, and a pointer to a struct always points to the first member of the struct, you can do inheritance by having the "superstruct" be the first member of the substruct:<p></p><pre><code>  struct foo {
    ...
  };

  struct bar {
    struct foo super;
    ...
  };
</code></pre>
You can now safely pass a pointer to bar into a function that takes pointer to foo.</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="37108961"><td><table border="0">  <tbody><tr>    <td class="ind" indent="1"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="40"></td><td valign="top" class="votelinks">
      <center><a id="up_37108961" href="https://news.ycombinator.com/vote?id=37108961&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=jjgreen" class="hnuser">jjgreen</a> <span class="age" title="2023-08-13T11:39:16 1691926756"><a href="https://news.ycombinator.com/item?id=37108961">on Aug 13, 2023</a></span> <span id="unv_37108961"></span>          <span class="navs">
             | <a href="#37108875" class="clicky" aria-hidden="true">parent</a> | <a href="#37108975" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37108961" n="8" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00"><i>all pointers are the same size in C</i><p>Generally true, but not guaranteed by the standard: <a href="https://stackoverflow.com/questions/1241205/" rel="nofollow noreferrer">https://stackoverflow.com/questions/1241205/</a></p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="37109089"><td><table border="0">  <tbody><tr>    <td class="ind" indent="2"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="80"></td><td valign="top" class="votelinks">
      <center><a id="up_37109089" href="https://news.ycombinator.com/vote?id=37109089&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=isidor3" class="hnuser">isidor3</a> <span class="age" title="2023-08-13T12:00:40 1691928040"><a href="https://news.ycombinator.com/item?id=37109089">on Aug 13, 2023</a></span> <span id="unv_37109089"></span>          <span class="navs">
             | <a href="#37108875" class="clicky" aria-hidden="true">root</a> | <a href="#37108961" class="clicky" aria-hidden="true">parent</a> | <a href="#37109558" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37109089" n="2" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">From that same post, though, referencing the C 11 standard<p>&gt; "All pointers to structure types shall have the same representation and alignment requirements as each other."</p><p>And so the concern wouldn't apply to this pattern?</p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="37113067"><td><table border="0">  <tbody><tr>    <td class="ind" indent="3"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="120"></td><td valign="top" class="votelinks">
      <center><a id="up_37113067" href="https://news.ycombinator.com/vote?id=37113067&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=crabbone" class="hnuser">crabbone</a> <span class="age" title="2023-08-13T19:03:05 1691953385"><a href="https://news.ycombinator.com/item?id=37113067">on Aug 13, 2023</a></span> <span id="unv_37113067"></span>          <span class="navs">
             | <a href="#37108875" class="clicky" aria-hidden="true">root</a> | <a href="#37109089" class="clicky" aria-hidden="true">parent</a> | <a href="#37109558" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37113067" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">Traditionally, pointers to functions were an exception.  But I haven't red the new standards.  I just assume pointers aren't all the same size, and don't try to rely on their size.</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                  <tr class="athing comtr" id="37109558"><td><table border="0">  <tbody><tr>    <td class="ind" indent="2"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="80"></td><td valign="top" class="votelinks">
      <center><a id="up_37109558" href="https://news.ycombinator.com/vote?id=37109558&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=michaelcampbell" class="hnuser">michaelcampbell</a> <span class="age" title="2023-08-13T12:56:30 1691931390"><a href="https://news.ycombinator.com/item?id=37109558">on Aug 13, 2023</a></span> <span id="unv_37109558"></span>          <span class="navs">
             | <a href="#37108875" class="clicky" aria-hidden="true">root</a> | <a href="#37108961" class="clicky" aria-hidden="true">parent</a> | <a href="#37109089" class="clicky" aria-hidden="true">prev</a> | <a href="#37109037" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37109558" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">I've been out of the c/c++ game for a long time, but it's always interesting to see what the edge, or non-guaranteed, elements are going to be whenever anyone claims:<p>&gt; all|every|always ... in C.</p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
            <tr class="athing comtr" id="37109037"><td><table border="0">  <tbody><tr>    <td class="ind" indent="2"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="80"></td><td valign="top" class="votelinks">
      <center><a id="up_37109037" href="https://news.ycombinator.com/vote?id=37109037&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=rezonant" class="hnuser">rezonant</a> <span class="age" title="2023-08-13T11:53:53 1691927633"><a href="https://news.ycombinator.com/item?id=37109037">on Aug 13, 2023</a></span> <span id="unv_37109037"></span>          <span class="navs">
             | <a href="#37108875" class="clicky" aria-hidden="true">root</a> | <a href="#37108961" class="clicky" aria-hidden="true">parent</a> | <a href="#37109558" class="clicky" aria-hidden="true">prev</a> | <a href="#37109304" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37109037" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">Particularly function pointers may have different sizes than what you'd expect. Thus it's best practice to always use sizeof() for the specific type of pointer you are interested in if you need to know it at runtime just as with any normal non-pointer type.</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
            <tr class="athing comtr" id="37109304"><td><table border="0">  <tbody><tr>    <td class="ind" indent="2"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="80"></td><td valign="top" class="votelinks">
      <center><a id="up_37109304" href="https://news.ycombinator.com/vote?id=37109304&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=mtlmtlmtlmtl" class="hnuser">mtlmtlmtlmtl</a> <span class="age" title="2023-08-13T12:26:04 1691929564"><a href="https://news.ycombinator.com/item?id=37109304">on Aug 13, 2023</a></span> <span id="unv_37109304"></span>          <span class="navs">
             | <a href="#37108875" class="clicky" aria-hidden="true">root</a> | <a href="#37108961" class="clicky" aria-hidden="true">parent</a> | <a href="#37109037" class="clicky" aria-hidden="true">prev</a> | <a href="#37110545" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37109304" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">Right, my bad. It's really struct pointers that are guaranteed to be the same size.</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
            <tr class="athing comtr" id="37110545"><td><table border="0">  <tbody><tr>    <td class="ind" indent="2"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="80"></td><td valign="top" class="votelinks">
      <center><a id="up_37110545" href="https://news.ycombinator.com/vote?id=37110545&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=commonlisp94" class="hnuser">commonlisp94</a> <span class="age" title="2023-08-13T14:50:14 1691938214"><a href="https://news.ycombinator.com/item?id=37110545">on Aug 13, 2023</a></span> <span id="unv_37110545"></span>          <span class="navs">
             | <a href="#37108875" class="clicky" aria-hidden="true">root</a> | <a href="#37108961" class="clicky" aria-hidden="true">parent</a> | <a href="#37109304" class="clicky" aria-hidden="true">prev</a> | <a href="#37108975" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37110545" n="2" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">In modern times, this only applied to MSDOS</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="37119051"><td><table border="0">  <tbody><tr>    <td class="ind" indent="3"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="120"></td><td valign="top" class="votelinks">
      <center><a id="up_37119051" href="https://news.ycombinator.com/vote?id=37119051&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=jjgreen" class="hnuser">jjgreen</a> <span class="age" title="2023-08-14T09:25:53 1692005153"><a href="https://news.ycombinator.com/item?id=37119051">on Aug 14, 2023</a></span> <span id="unv_37119051"></span>          <span class="navs">
             | <a href="#37108875" class="clicky" aria-hidden="true">root</a> | <a href="#37110545" class="clicky" aria-hidden="true">parent</a> | <a href="#37108975" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37119051" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">Near, far and huge pointers; those were the days ...</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                              <tr class="athing comtr" id="37108975"><td><table border="0">  <tbody><tr>    <td class="ind" indent="0"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="0"></td><td valign="top" class="votelinks">
      <center><a id="up_37108975" href="https://news.ycombinator.com/vote?id=37108975&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=sharikous" class="hnuser">sharikous</a> <span class="age" title="2023-08-13T11:41:49 1691926909"><a href="https://news.ycombinator.com/item?id=37108975">on Aug 13, 2023</a></span> <span id="unv_37108975"></span>          <span class="navs">
             | <a href="#37108875" class="clicky" aria-hidden="true">prev</a> | <a href="#37108849" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37108975" n="12" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">My philosophy on this is to treat C++ and C as completely different languages (as they actually are), like say Java and C or python and C. Yes it's nice that some part of the header file can be parsed in both languages and that most of the syntax is similar.<p>But once your expectation is that you have to do all the work at the FFI boundary it's less frustrating than to experience all the small mismatches as compiler errors or annoying runtime errors.</p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="37109125"><td><table border="0">  <tbody><tr>    <td class="ind" indent="1"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="40"></td><td valign="top" class="votelinks">
      <center><a id="up_37109125" href="https://news.ycombinator.com/vote?id=37109125&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=rezonant" class="hnuser">rezonant</a> <span class="age" title="2023-08-13T12:05:46 1691928346"><a href="https://news.ycombinator.com/item?id=37109125">on Aug 13, 2023</a></span> <span id="unv_37109125"></span>          <span class="navs">
             | <a href="#37108975" class="clicky" aria-hidden="true">parent</a> | <a href="#37108849" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37109125" n="11" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">As with all of the languages you mention, consuming C from the other language is trivial. And since C++ is a superset of C that is certainly true there. Consuming the other language from C is difficult without a C compatible runtime API to help bridge the gap.<p>Of course the issue for C++, unlike the other examples here, is that it does not have a runtime layer that can be used to bridge the gap. So we either write a wrapper in C++ using extern C, or use a tool to do it.</p><p>It seems there was a GSOC effort for SWIG to generate C wrappers for C++ libs but it might not have made it all the way? I don't see C as a target language on SWIG's site.</p><p>Still, a bespoke, high level design for the C wrapper is always going to be less painful for the consumer.</p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="37109845"><td><table border="0">  <tbody><tr>    <td class="ind" indent="2"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="80"></td><td valign="top" class="votelinks">
      <center><a id="up_37109845" href="https://news.ycombinator.com/vote?id=37109845&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=kaashif" class="hnuser">kaashif</a> <span class="age" title="2023-08-13T13:26:44 1691933204"><a href="https://news.ycombinator.com/item?id=37109845">on Aug 13, 2023</a></span> <span id="unv_37109845"></span>          <span class="navs">
             | <a href="#37108975" class="clicky" aria-hidden="true">root</a> | <a href="#37109125" class="clicky" aria-hidden="true">parent</a> | <a href="#37109236" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37109845" n="7" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">&gt; And since C++ is a superset of C that is certainly true there.<p>C++ is not a superset of C. C99 has and C++ (at the time of writing) doesn't have: restricted pointers, designated initializers, variable length arrays, and probably more. These are language features that are actually used.</p><p>This doesn't change any of your core points.</p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="37111152"><td><table border="0">  <tbody><tr>    <td class="ind" indent="3"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="120"></td><td valign="top" class="votelinks">
      <center><a id="up_37111152" href="https://news.ycombinator.com/vote?id=37111152&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=ftaghn" class="hnuser">ftaghn</a> <span class="age" title="2023-08-13T16:03:29 1691942609"><a href="https://news.ycombinator.com/item?id=37111152">on Aug 13, 2023</a></span> <span id="unv_37111152"></span>          <span class="navs">
             | <a href="#37108975" class="clicky" aria-hidden="true">root</a> | <a href="#37109845" class="clicky" aria-hidden="true">parent</a> | <a href="#37110566" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37111152" n="2" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">&gt; variable length arrays<p>It was such a terrible feature it was made optional in the C11 standard (you can be a conforming C11 compiler and not allow this feature) and will never, ever be implemented in a Microsoft compiler (while C is not a priority for MS, do note that they updated to C11 and C17).</p><p>You can hear their reasoning there :</p><p><a href="https://devblogs.microsoft.com/cppblog/c11-and-c17-standard-support-arriving-in-msvc/" rel="nofollow noreferrer">https://devblogs.microsoft.com/cppblog/c11-and-c17-standard-...</a></p><p>The linux kernel used to make use of the feature and removed every instance of it from the code base :</p><p><a href="https://www.phoronix.com/news/Linux-Kills-The-VLA" rel="nofollow noreferrer">https://www.phoronix.com/news/Linux-Kills-The-VLA</a></p><p>&gt; Particularly over the past several cycles there has been code eliminating the kernel's usage of VLAs and that has continued so far for this Linux 4.20~5.0 cycle. There had been more than 200 spots in the kernel relying upon VLAs but now as of the latest Linux Git code it should be basically over.</p><p>While I do agree that it is wrong to consider C++ a superset of C, it is time to forget about C99's biggest mistake and treat it as if it didn't happen.</p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="37113808"><td><table border="0">  <tbody><tr>    <td class="ind" indent="4"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="160"></td><td valign="top" class="votelinks">
      <center><a id="up_37113808" href="https://news.ycombinator.com/vote?id=37113808&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=kaashif" class="hnuser">kaashif</a> <span class="age" title="2023-08-13T20:02:21 1691956941"><a href="https://news.ycombinator.com/item?id=37113808">on Aug 13, 2023</a></span> <span id="unv_37113808"></span>          <span class="navs">
             | <a href="#37108975" class="clicky" aria-hidden="true">root</a> | <a href="#37111152" class="clicky" aria-hidden="true">parent</a> | <a href="#37110566" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37113808" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">Agreed completely on all counts.<p>Never ever use VLAs.</p><p>My point is really just semantic, the overall argument I was responding to is intact.</p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                  <tr class="athing comtr" id="37110566"><td><table border="0">  <tbody><tr>    <td class="ind" indent="3"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="120"></td><td valign="top" class="votelinks">
      <center><a id="up_37110566" href="https://news.ycombinator.com/vote?id=37110566&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=patrick451" class="hnuser">patrick451</a> <span class="age" title="2023-08-13T14:52:55 1691938375"><a href="https://news.ycombinator.com/item?id=37110566">on Aug 13, 2023</a></span> <span id="unv_37110566"></span>          <span class="navs">
             | <a href="#37108975" class="clicky" aria-hidden="true">root</a> | <a href="#37109845" class="clicky" aria-hidden="true">parent</a> | <a href="#37111152" class="clicky" aria-hidden="true">prev</a> | <a href="#37109236" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37110566" n="4" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">C++ has had designated initializers since c++20.</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="37113769"><td><table border="0">  <tbody><tr>    <td class="ind" indent="4"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="160"></td><td valign="top" class="votelinks">
      <center><a id="up_37113769" href="https://news.ycombinator.com/vote?id=37113769&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=kaashif" class="hnuser">kaashif</a> <span class="age" title="2023-08-13T19:59:22 1691956762"><a href="https://news.ycombinator.com/item?id=37113769">on Aug 13, 2023</a></span> <span id="unv_37113769"></span>          <span class="navs">
             | <a href="#37108975" class="clicky" aria-hidden="true">root</a> | <a href="#37110566" class="clicky" aria-hidden="true">parent</a> | <a href="#37111384" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37113769" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">Point taken, I was inaccurate. Out of order designated initializers still don't work in C++20, right? Which still means C++ isn't a superset of C.</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
            <tr class="athing comtr" id="37111384"><td><table border="0">  <tbody><tr>    <td class="ind" indent="4"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="160"></td><td valign="top" class="votelinks">
      <center><a id="up_37111384" href="https://news.ycombinator.com/vote?id=37111384&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=turndown" class="hnuser">turndown</a> <span class="age" title="2023-08-13T16:25:54 1691943954"><a href="https://news.ycombinator.com/item?id=37111384">on Aug 13, 2023</a></span> <span id="unv_37111384"></span>          <span class="navs">
             | <a href="#37108975" class="clicky" aria-hidden="true">root</a> | <a href="#37110566" class="clicky" aria-hidden="true">parent</a> | <a href="#37113769" class="clicky" aria-hidden="true">prev</a> | <a href="#37109236" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37111384" n="2" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">Any look into this will show that C's designated initializers are significantly more flexible/better in every way.</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="37113028"><td><table border="0">  <tbody><tr>    <td class="ind" indent="5"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="200"></td><td valign="top" class="votelinks">
      <center><a id="up_37113028" href="https://news.ycombinator.com/vote?id=37113028&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=SubjectToChange" class="hnuser">SubjectToChange</a> <span class="age" title="2023-08-13T19:00:14 1691953214"><a href="https://news.ycombinator.com/item?id=37113028">on Aug 13, 2023</a></span> <span id="unv_37113028"></span>          <span class="navs">
             | <a href="#37108975" class="clicky" aria-hidden="true">root</a> | <a href="#37111384" class="clicky" aria-hidden="true">parent</a> | <a href="#37109236" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37113028" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">It’s amusing to me that whenever C has a feature that C++ doesn’t, C programmers hammer on the usefulness and power of said feature, but on the converse those same C programmers hammer on the divine simplicity of C.<p>C++ has constructors, it doesn’t really <i>need</i> designated initializers in the first place. They were added primarily for C compatibility.</p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                              <tr class="athing comtr" id="37109236"><td><table border="0">  <tbody><tr>    <td class="ind" indent="2"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="80"></td><td valign="top" class="votelinks">
      <center><a id="up_37109236" href="https://news.ycombinator.com/vote?id=37109236&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=zabzonk" class="hnuser">zabzonk</a> <span class="age" title="2023-08-13T12:17:36 1691929056"><a href="https://news.ycombinator.com/item?id=37109236">on Aug 13, 2023</a></span> <span id="unv_37109236"></span>          <span class="navs">
             | <a href="#37108975" class="clicky" aria-hidden="true">root</a> | <a href="#37109125" class="clicky" aria-hidden="true">parent</a> | <a href="#37109845" class="clicky" aria-hidden="true">prev</a> | <a href="#37108849" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37109236" n="3" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">&gt; Of course the issue for C++, unlike the other examples here, is that it does not have a runtime layer that can be used to bridge the gap<p>neither, per standards, does c</p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="37109294"><td><table border="0">  <tbody><tr>    <td class="ind" indent="3"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="120"></td><td valign="top" class="votelinks">
      <center><a id="up_37109294" href="https://news.ycombinator.com/vote?id=37109294&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=rezonant" class="hnuser">rezonant</a> <span class="age" title="2023-08-13T12:25:19 1691929519"><a href="https://news.ycombinator.com/item?id=37109294">on Aug 13, 2023</a></span> <span id="unv_37109294"></span>          <span class="navs">
             | <a href="#37108975" class="clicky" aria-hidden="true">root</a> | <a href="#37109236" class="clicky" aria-hidden="true">parent</a> | <a href="#37108849" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37109294" n="2" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">Yes, but C is simple (and standard) enough that higher level runtimes have more or less universally managed to construct decent FFI mechanisms to access it.<p>C++ FFI would be kind of feasible if mangling were standardized (for instance) :-/</p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="37113120"><td><table border="0">  <tbody><tr>    <td class="ind" indent="4"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="160"></td><td valign="top" class="votelinks">
      <center><a id="up_37113120" href="https://news.ycombinator.com/vote?id=37113120&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=SubjectToChange" class="hnuser">SubjectToChange</a> <span class="age" title="2023-08-13T19:07:38 1691953658"><a href="https://news.ycombinator.com/item?id=37113120">on Aug 13, 2023</a></span> <span id="unv_37113120"></span>          <span class="navs">
             | <a href="#37108975" class="clicky" aria-hidden="true">root</a> | <a href="#37109294" class="clicky" aria-hidden="true">parent</a> | <a href="#37108849" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37113120" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">Standardizing name mangling would only be a baby step towards C++ ABI compatibility, sadly.</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                                    <tr class="athing comtr" id="37108849"><td><table border="0">  <tbody><tr>    <td class="ind" indent="0"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="0"></td><td valign="top" class="votelinks">
      <center><a id="up_37108849" href="https://news.ycombinator.com/vote?id=37108849&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=buserror" class="hnuser">buserror</a> <span class="age" title="2023-08-13T11:19:41 1691925581"><a href="https://news.ycombinator.com/item?id=37108849">on Aug 13, 2023</a></span> <span id="unv_37108849"></span>          <span class="navs">
             | <a href="#37108975" class="clicky" aria-hidden="true">prev</a> | <a href="#37097776" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37108849" n="2" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">The only times I had to do that I.... converted the whole heap of C++ to C and used that instead. You rarely see libraries using all the most complex constructs of C++, and quite frankly, if they do, I'd rather stay clear of that pile of bloatware :-)<p>I wrote and shipped C++ as a job for many years -millions of lines I'm sure- and I've 'reverted' to plain C around 2007 or so, and I couldn't be happier.</p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="37109409"><td><table border="0">  <tbody><tr>    <td class="ind" indent="1"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="40"></td><td valign="top" class="votelinks">
      <center><a id="up_37109409" href="https://news.ycombinator.com/vote?id=37109409&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=lelanthran" class="hnuser">lelanthran</a> <span class="age" title="2023-08-13T12:40:20 1691930420"><a href="https://news.ycombinator.com/item?id=37109409">on Aug 13, 2023</a></span> <span id="unv_37109409"></span>          <span class="navs">
             | <a href="#37108849" class="clicky" aria-hidden="true">parent</a> | <a href="#37097776" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37109409" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">&gt; I wrote and shipped C++ as a job for many years -millions of lines I'm sure- and I've 'reverted' to plain C around 2007 or so, and I couldn't be happier.<p>I did too, all the way up to (IIRC) 2011. My happiness levels improved  when I stopped working on C++ and, for the type of native-code problems that I used C++  for, used plain C instead.</p><p>My goal is to ship code, with a trade-off between delivery dates, runtime performance and robustness. As the problem gets more complex, I find that C++ muddies the waters even more, impacting on all three axis' above.</p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                  <tr class="athing comtr" id="37097776"><td><table border="0">  <tbody><tr>    <td class="ind" indent="0"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="0"></td><td valign="top" class="votelinks">
      <center><a id="up_37097776" href="https://news.ycombinator.com/vote?id=37097776&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=D4ckard" class="hnuser">D4ckard</a> <span class="age" title="2023-08-12T07:05:04 1691823904"><a href="https://news.ycombinator.com/item?id=37097776">on Aug 13, 2023</a></span> <span id="unv_37097776"></span>          <span class="navs">
             | <a href="#37108849" class="clicky" aria-hidden="true">prev</a> | <a href="#37108860" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37097776" n="3" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">Hey , first time posting something I've made here I think :D. I'm excited to hear what you think about it!</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="37108645"><td><table border="0">  <tbody><tr>    <td class="ind" indent="1"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="40"></td><td valign="top" class="votelinks">
      <center><a id="up_37108645" href="https://news.ycombinator.com/vote?id=37108645&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=lmz" class="hnuser">lmz</a> <span class="age" title="2023-08-13T10:47:38 1691923658"><a href="https://news.ycombinator.com/item?id=37108645">on Aug 13, 2023</a></span> <span id="unv_37108645"></span>          <span class="navs">
             | <a href="#37097776" class="clicky" aria-hidden="true">parent</a> | <a href="#37108860" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37108645" n="2" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">I'd suggest removing the part where you use malloc to allocate and just skip to the part where you use new and link to libstdc++. At the malloc part I was wondering what the point of the whole thing was when you're basically using none of the C++ logic and rewriting everything in C.</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="37109002"><td><table border="0">  <tbody><tr>    <td class="ind" indent="2"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="80"></td><td valign="top" class="votelinks">
      <center><a id="up_37109002" href="https://news.ycombinator.com/vote?id=37109002&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=rezonant" class="hnuser">rezonant</a> <span class="age" title="2023-08-13T11:46:35 1691927195"><a href="https://news.ycombinator.com/item?id=37109002">on Aug 13, 2023</a></span> <span id="unv_37109002"></span>          <span class="navs">
             | <a href="#37097776" class="clicky" aria-hidden="true">root</a> | <a href="#37108645" class="clicky" aria-hidden="true">parent</a> | <a href="#37108860" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37109002" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">Also the Rational usage example in C++ is using stack allocation. It's weird to then pretend like heap allocation is equivalent in the C example. I think making stack allocation work in this case would probably be difficult, but it's worth pointing out in the article that the choice is intentional and not a misunderstanding of non-new allocation in c++.<p>You could just use new() in the first example instead and avoid the whole issue.</p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                        <tr class="athing comtr" id="37108860"><td><table border="0">  <tbody><tr>    <td class="ind" indent="0"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="0"></td><td valign="top" class="votelinks">
      <center><a id="up_37108860" href="https://news.ycombinator.com/vote?id=37108860&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=cesaref" class="hnuser">cesaref</a> <span class="age" title="2023-08-13T11:22:32 1691925752"><a href="https://news.ycombinator.com/item?id=37108860">on Aug 13, 2023</a></span> <span id="unv_37108860"></span>          <span class="navs">
             | <a href="#37097776" class="clicky" aria-hidden="true">prev</a> | <a href="#37108595" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37108860" n="5" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">I think you can do better than this void* type this equivalent - if you consider what is happening with FILE* when you use stdio.h, you have basically a class interface, and i'd follow this pattern.<p>There is no reason to use void*, create a distinct type which can be opaque if you want, and then you can hide the implementation details in the C++ implementation to call through to the C++ classes. You get some degree of type safety this way.</p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="37109113"><td><table border="0">  <tbody><tr>    <td class="ind" indent="1"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="40"></td><td valign="top" class="votelinks">
      <center><a id="up_37109113" href="https://news.ycombinator.com/vote?id=37109113&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=tom_" class="hnuser">tom_</a> <span class="age" title="2023-08-13T12:04:30 1691928270"><a href="https://news.ycombinator.com/item?id=37109113">on Aug 13, 2023</a></span> <span id="unv_37109113"></span>          <span class="navs">
             | <a href="#37108860" class="clicky" aria-hidden="true">parent</a> | <a href="#37108595" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37109113" n="4" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">Indeed. It's super easy to create an opaque type in C: forward-declare a struct. So in the header:<p></p><pre><code>    struct Rational2;
    struct Rational2 *make_rational(int,int);
</code></pre>
Then in the file:<p></p><pre><code>    Rational2 *make_rational(int n,int d){
        return (Rational2 *)new Rational(n,d);
    }

    void del_rational(Rational2 **pp){
        delete (Rational2 *)*pp;
        *pp=nullptr;
    }
</code></pre>
And so on. You could probably arrange for it to be called Rational in both languages, starting out along these lines and then taking it from there:<p></p><pre><code>    #ifdef __cplusplus
    class Rational { ... };
    #else
    struct Rational;
    typedef struct Rational Rational;
    #endif
</code></pre>
And now you can could your C helpers from C++ as well, and the result is a genuine C++ Rational object that you can use either way. I don't think the ODR applies across languages, and I'm not 100% certain this would actually be an ODR violation anyway, at least not <i>quite</i>, but you'd need to ask somebody more qualified than me.<p>(Another suggestion I would have is to bracket the entire header in the ifdef'd extern "C" {...} block, which limits the amount of extra crap you have in the header and per function. I think you can direct clang-format not to indent these blocks.)</p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="37109997"><td><table border="0">  <tbody><tr>    <td class="ind" indent="2"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="80"></td><td valign="top" class="votelinks">
      <center><a id="up_37109997" href="https://news.ycombinator.com/vote?id=37109997&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=gpderetta" class="hnuser">gpderetta</a> <span class="age" title="2023-08-13T13:45:25 1691934325"><a href="https://news.ycombinator.com/item?id=37109997">on Aug 13, 2023</a></span> <span id="unv_37109997"></span>          <span class="navs">
             | <a href="#37108860" class="clicky" aria-hidden="true">root</a> | <a href="#37109113" class="clicky" aria-hidden="true">parent</a> | <a href="#37109219" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37109997" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">The converse is that if your class is just a standard layout object with a trivial destructor, you can expose an equivalent C definition without all the C++ sugar and avoid the forced allocation.<p>The allocation and the opaque handler can still be useful for ABI stability purposes, but that's true in C++ as well.</p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
            <tr class="athing comtr" id="37109219"><td><table border="0">  <tbody><tr>    <td class="ind" indent="2"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="80"></td><td valign="top" class="votelinks">
      <center><a id="up_37109219" href="https://news.ycombinator.com/vote?id=37109219&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=zabzonk" class="hnuser">zabzonk</a> <span class="age" title="2023-08-13T12:15:41 1691928941"><a href="https://news.ycombinator.com/item?id=37109219">on Aug 13, 2023</a></span> <span id="unv_37109219"></span>          <span class="navs">
             | <a href="#37108860" class="clicky" aria-hidden="true">root</a> | <a href="#37109113" class="clicky" aria-hidden="true">parent</a> | <a href="#37109997" class="clicky" aria-hidden="true">prev</a> | <a href="#37108595" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37109219" n="2" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">it's super easy to define an opaque type in c++ - you do it just like you do in c. you don't need to jump through these hoops.</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="37109357"><td><table border="0">  <tbody><tr>    <td class="ind" indent="3"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="120"></td><td valign="top" class="votelinks">
      <center><a id="up_37109357" href="https://news.ycombinator.com/vote?id=37109357&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=tom_" class="hnuser">tom_</a> <span class="age" title="2023-08-13T12:33:43 1691930023"><a href="https://news.ycombinator.com/item?id=37109357">on Aug 13, 2023</a></span> <span id="unv_37109357"></span>          <span class="navs">
             | <a href="#37108860" class="clicky" aria-hidden="true">root</a> | <a href="#37109219" class="clicky" aria-hidden="true">parent</a> | <a href="#37108595" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37109357" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">Quite. And in fact, in this specific situation, in C++ you don't need to jump through any hoops at all, because you have the Rational class there already, ready for use. This whole business only exists to provide a C-friendly wrapper for this existing C++ class, along the lines of the one proposed in the article, with a couple of tweaks that I think would improve it.</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                              <tr class="athing comtr" id="37108595"><td><table border="0">  <tbody><tr>    <td class="ind" indent="0"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="0"></td><td valign="top" class="votelinks">
      <center><a id="up_37108595" href="https://news.ycombinator.com/vote?id=37108595&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=tragomaskhalos" class="hnuser">tragomaskhalos</a> <span class="age" title="2023-08-13T10:38:57 1691923137"><a href="https://news.ycombinator.com/item?id=37108595">on Aug 13, 2023</a></span> <span id="unv_37108595"></span>          <span class="navs">
             | <a href="#37108860" class="clicky" aria-hidden="true">prev</a> | <a href="#37109926" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37108595" n="4" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">Your allocation method - malloc + cast - may work for simple classes but overall it's a serious no-no; think you should either be using new/delete, or, if sticking with malloc /free, use placement new and an explicit destructor call respectively.</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="37110680"><td><table border="0">  <tbody><tr>    <td class="ind" indent="1"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="40"></td><td valign="top" class="votelinks">
      <center><a id="up_37110680" href="https://news.ycombinator.com/vote?id=37110680&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=krater23" class="hnuser">krater23</a> <span class="age" title="2023-08-13T15:07:25 1691939245"><a href="https://news.ycombinator.com/item?id=37110680">on Aug 13, 2023</a></span> <span id="unv_37110680"></span>          <span class="navs">
             | <a href="#37108595" class="clicky" aria-hidden="true">parent</a> | <a href="#37108629" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37110680" n="2" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">And the stupidest thing, he uses this malloc in a .cc file, where it would no issue to just use new. Thats the point where I stopped reading. After
auto main() -&gt; int {
...
}<p>I didn't supposed that anything really meaningful can come...</p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="37115528"><td><table border="0">  <tbody><tr>    <td class="ind" indent="2"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="80"></td><td valign="top" class="votelinks">
      <center><a id="up_37115528" href="https://news.ycombinator.com/vote?id=37115528&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=intelVISA" class="hnuser">intelVISA</a> <span class="age" title="2023-08-13T23:04:59 1691967899"><a href="https://news.ycombinator.com/item?id=37115528">on Aug 13, 2023</a></span> <span id="unv_37115528"></span>          <span class="navs">
             | <a href="#37108595" class="clicky" aria-hidden="true">root</a> | <a href="#37110680" class="clicky" aria-hidden="true">parent</a> | <a href="#37108629" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37115528" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">Thanks, you spared me the horrors.</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                  <tr class="athing comtr" id="37108629"><td><table border="0">  <tbody><tr>    <td class="ind" indent="1"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="40"></td><td valign="top" class="votelinks">
      <center><a id="up_37108629" href="https://news.ycombinator.com/vote?id=37108629&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=jwatzman" class="hnuser">jwatzman</a> <span class="age" title="2023-08-13T10:43:59 1691923439"><a href="https://news.ycombinator.com/item?id=37108629">on Aug 13, 2023</a></span> <span id="unv_37108629"></span>          <span class="navs">
             | <a href="#37108595" class="clicky" aria-hidden="true">parent</a> | <a href="#37110680" class="clicky" aria-hidden="true">prev</a> | <a href="#37109926" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37108629" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">The article discusses constructors and how to make them work under "Linking the C++ standard library".<p>I wonder if placement new would run into the same linker problem that the article mentions -- I'll have to try it at some point :)</p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                  <tr class="athing comtr" id="37109926"><td><table border="0">  <tbody><tr>    <td class="ind" indent="0"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="0"></td><td valign="top" class="votelinks">
      <center><a id="up_37109926" href="https://news.ycombinator.com/vote?id=37109926&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=masfuerte" class="hnuser">masfuerte</a> <span class="age" title="2023-08-13T13:36:28 1691933788"><a href="https://news.ycombinator.com/item?id=37109926">on Aug 13, 2023</a></span> <span id="unv_37109926"></span>          <span class="navs">
             | <a href="#37108595" class="clicky" aria-hidden="true">prev</a> | <a href="#37129733" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37109926" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">This is kind of what Microsoft's COM gives you. You have to write your classes in a particular way but then you get a well-defined API that can be consumed in many languages, including C.</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
            <tr class="athing comtr" id="37129733"><td><table border="0">  <tbody><tr>    <td class="ind" indent="0"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="0"></td><td valign="top" class="votelinks">
      <center><a id="up_37129733" href="https://news.ycombinator.com/vote?id=37129733&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=kazinator" class="hnuser">kazinator</a> <span class="age" title="2023-08-15T03:13:18 1692069198"><a href="https://news.ycombinator.com/item?id=37129733">on Aug 15, 2023</a></span> <span id="unv_37129733"></span>          <span class="navs">
             | <a href="#37109926" class="clicky" aria-hidden="true">prev</a> | <a href="#37111034" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37129733" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">&gt; <i>We successfully created a class in C++ that we can now use in C!</i><p>It's substantially easier to bind FFI to it if it's usable from C.</p><p>If it's usable from C, it's usable from umpteen other languages.</p><p>Thou shalt not write a C++ component without a C API.</p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
            <tr class="athing comtr" id="37111034"><td><table border="0">  <tbody><tr>    <td class="ind" indent="0"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="0"></td><td valign="top" class="votelinks">
      <center><a id="up_37111034" href="https://news.ycombinator.com/vote?id=37111034&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=FreshStart" class="hnuser">FreshStart</a> <span class="age" title="2023-08-13T15:49:08 1691941748"><a href="https://news.ycombinator.com/item?id=37111034">on Aug 13, 2023</a></span> <span id="unv_37111034"></span>          <span class="navs">
             | <a href="#37129733" class="clicky" aria-hidden="true">prev</a> | <a href="#37109727" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37111034" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">Yes, but the performance penalty becomes glaringly obvious as you are constantly dereferencing (composition, relationship and function) pointers and thus generate misses..</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
            <tr class="athing comtr" id="37109727"><td><table border="0">  <tbody><tr>    <td class="ind" indent="0"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="0"></td><td valign="top" class="votelinks">
      <center><a id="up_37109727" href="https://news.ycombinator.com/vote?id=37109727&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=hwc" class="hnuser">hwc</a> <span class="age" title="2023-08-13T13:15:10 1691932510"><a href="https://news.ycombinator.com/item?id=37109727">on Aug 13, 2023</a></span> <span id="unv_37109727"></span>          <span class="navs">
             | <a href="#37111034" class="clicky" aria-hidden="true">prev</a> | <a href="#37113277" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37109727" n="2" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">why not forward decare a struct type in `ifndef __cplusplus` and use pointers to that type instead of `void*` pointers?</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="37110697"><td><table border="0">  <tbody><tr>    <td class="ind" indent="1"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="40"></td><td valign="top" class="votelinks">
      <center><a id="up_37110697" href="https://news.ycombinator.com/vote?id=37110697&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=krater23" class="hnuser">krater23</a> <span class="age" title="2023-08-13T15:09:04 1691939344"><a href="https://news.ycombinator.com/item?id=37110697">on Aug 13, 2023</a></span> <span id="unv_37110697"></span>          <span class="navs">
             | <a href="#37109727" class="clicky" aria-hidden="true">parent</a> | <a href="#37113277" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="37110697" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">He uses malloc instead of new in a .cc file. I don't think that he realized that all what he is doing is overcomplicated at all.</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                  <tr class="athing comtr" id="37113277"><td><table border="0">  <tbody><tr>    <td class="ind" indent="0"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="0"></td><td valign="top" class="votelinks">
      <center><a id="up_37113277" href="https://news.ycombinator.com/vote?id=37113277&amp;how=up&amp;goto=item%3Fid%3D37097775"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=WhereIsTheTruth" class="hnuser">WhereIsTheTruth</a> <span class="age" title="2023-08-13T19:18:26 1691954306"><a href="https://news.ycombinator.com/item?id=37113277">on Aug 13, 2023</a></span> <span id="unv_37113277"></span>          <span class="navs">
             | <a href="#37109727" class="clicky" aria-hidden="true">prev</a> <a class="togg clicky" id="37113277" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">class is a mistake, all C need is proper union (tagged union)<p>Both Rust and Zig for example nailed it</p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
            </tbody></table>
  <br><br>
</td></tr>
<tr><td><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="10" width="0"><table width="100%" cellspacing="0" cellpadding="1"><tbody><tr><td bgcolor="#ff6600"></td></tr></tbody></table><br>
<center><a href="https://www.ycombinator.com/apply/">Consider applying for YC's Summer 2025 batch! Applications are open till May 13</a></center><br>
<center><span class="yclinks"><a href="https://news.ycombinator.com/newsguidelines.html">Guidelines</a> | <a href="https://news.ycombinator.com/newsfaq.html">FAQ</a> | <a href="https://news.ycombinator.com/lists">Lists</a> | <a href="https://github.com/HackerNews/API">API</a> | <a href="https://news.ycombinator.com/security.html">Security</a> | <a href="https://www.ycombinator.com/legal/">Legal</a> | <a href="https://www.ycombinator.com/apply/">Apply to YC</a> | <a href="mailto:hn@ycombinator.com">Contact</a></span><br><br>
<form method="get" action="https://hn.algolia.com/">Search: <input type="text" name="q" size="17" autocorrect="off" spellcheck="false" autocapitalize="off" autocomplete="off"></form></center></td></tr>      </tbody></table></center>
      <script type="text/javascript"></script>
  
</body></html>
