<!-- Saved from https://news.ycombinator.com/item?id=42439654 at 2025-05-12T15:32:27Z using monolith v2.10.1 -->
<html lang="en" op="item"><head><meta http-equiv="Content-Security-Policy" content="script-src 'none';"></meta><meta name="referrer" content="origin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" type="text/css" href="data:text/css;base64,Ym9keSAgeyBmb250LWZhbWlseTpWZXJkYW5hLCBHZW5ldmEsIHNhbnMtc2VyaWY7IGZvbnQtc2l6ZToxMHB0OyBjb2xvcjojODI4MjgyOyB9CnRkICAgIHsgZm9udC1mYW1pbHk6VmVyZGFuYSwgR2VuZXZhLCBzYW5zLXNlcmlmOyBmb250LXNpemU6MTBwdDsgY29sb3I6IzgyODI4MjsgfQoKLmFkbWluIHRkICAgeyBmb250LWZhbWlseTpWZXJkYW5hLCBHZW5ldmEsIHNhbnMtc2VyaWY7IGZvbnQtc2l6ZTo4LjVwdDsgY29sb3I6IzAwMDAwMDsgfQouc3VidGV4dCB0ZCB7IGZvbnQtZmFtaWx5OlZlcmRhbmEsIEdlbmV2YSwgc2Fucy1zZXJpZjsgZm9udC1zaXplOiAgN3B0OyBjb2xvcjojODI4MjgyOyB9CgppbnB1dCAgICB7IGZvbnQtZmFtaWx5Om1vbm9zcGFjZTsgZm9udC1zaXplOjEwcHQ7IH0KaW5wdXRbdHlwZT0ic3VibWl0Il0geyBmb250LWZhbWlseTpWZXJkYW5hLCBHZW5ldmEsIHNhbnMtc2VyaWY7IH0KdGV4dGFyZWEgeyBmb250LWZhbWlseTptb25vc3BhY2U7IGZvbnQtc2l6ZToxMHB0OyByZXNpemU6Ym90aDsgfQoKYTpsaW5rICAgIHsgY29sb3I6IzAwMDAwMDsgdGV4dC1kZWNvcmF0aW9uOm5vbmU7IH0KYTp2aXNpdGVkIHsgY29sb3I6IzgyODI4MjsgdGV4dC1kZWNvcmF0aW9uOm5vbmU7IH0KCi5kZWZhdWx0IHsgZm9udC1mYW1pbHk6VmVyZGFuYSwgR2VuZXZhLCBzYW5zLXNlcmlmOyBmb250LXNpemU6IDEwcHQ7IGNvbG9yOiM4MjgyODI7IH0KLmFkbWluICAgeyBmb250LWZhbWlseTpWZXJkYW5hLCBHZW5ldmEsIHNhbnMtc2VyaWY7IGZvbnQtc2l6ZTo4LjVwdDsgY29sb3I6IzAwMDAwMDsgfQoudGl0bGUgICB7IGZvbnQtZmFtaWx5OlZlcmRhbmEsIEdlbmV2YSwgc2Fucy1zZXJpZjsgZm9udC1zaXplOiAxMHB0OyBjb2xvcjojODI4MjgyOyBvdmVyZmxvdzpoaWRkZW47IH0KLnN1YnRleHQgeyBmb250LWZhbWlseTpWZXJkYW5hLCBHZW5ldmEsIHNhbnMtc2VyaWY7IGZvbnQtc2l6ZTogIDdwdDsgY29sb3I6IzgyODI4MjsgfQoueWNsaW5rcyB7IGZvbnQtZmFtaWx5OlZlcmRhbmEsIEdlbmV2YSwgc2Fucy1zZXJpZjsgZm9udC1zaXplOiAgOHB0OyBjb2xvcjojODI4MjgyOyB9Ci5wYWdldG9wIHsgZm9udC1mYW1pbHk6VmVyZGFuYSwgR2VuZXZhLCBzYW5zLXNlcmlmOyBmb250LXNpemU6IDEwcHQ7IGNvbG9yOiMyMjIyMjI7IGxpbmUtaGVpZ2h0OjEycHg7IH0KLmNvbWhlYWQgeyBmb250LWZhbWlseTpWZXJkYW5hLCBHZW5ldmEsIHNhbnMtc2VyaWY7IGZvbnQtc2l6ZTogIDhwdDsgY29sb3I6IzgyODI4MjsgfQouY29tbWVudCB7IGZvbnQtZmFtaWx5OlZlcmRhbmEsIEdlbmV2YSwgc2Fucy1zZXJpZjsgZm9udC1zaXplOiAgOXB0OyB9Ci5obm5hbWUgIHsgbWFyZ2luLWxlZnQ6MXB4OyBtYXJnaW4tcmlnaHQ6IDVweDsgfQoKI2hubWFpbiB7IG1pbi13aWR0aDogNzk2cHg7IH0KCi50aXRsZSBhIHsgd29yZC1icmVhazogYnJlYWstd29yZDsgfQoKLmNvbW1lbnQgYTpsaW5rLCAuY29tbWVudCBhOnZpc2l0ZWQgeyB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTsgfQoubm9zaG93IHsgZGlzcGxheTogbm9uZTsgfQoubm9zZWUgeyB2aXNpYmlsaXR5OiBoaWRkZW47IHBvaW50ZXItZXZlbnRzOiBub25lOyBjdXJzb3I6IGRlZmF1bHQgfQoKLmMwMCwgLmMwMCBhOmxpbmsgeyBjb2xvcjojMDAwMDAwOyB9Ci5jNWEsIC5jNWEgYTpsaW5rLCAuYzVhIGE6dmlzaXRlZCB7IGNvbG9yOiM1YTVhNWE7IH0KLmM3MywgLmM3MyBhOmxpbmssIC5jNzMgYTp2aXNpdGVkIHsgY29sb3I6IzczNzM3MzsgfQouYzgyLCAuYzgyIGE6bGluaywgLmM4MiBhOnZpc2l0ZWQgeyBjb2xvcjojODI4MjgyOyB9Ci5jODgsIC5jODggYTpsaW5rLCAuYzg4IGE6dmlzaXRlZCB7IGNvbG9yOiM4ODg4ODg7IH0KLmM5YywgLmM5YyBhOmxpbmssIC5jOWMgYTp2aXNpdGVkIHsgY29sb3I6IzljOWM5YzsgfQouY2FlLCAuY2FlIGE6bGluaywgLmNhZSBhOnZpc2l0ZWQgeyBjb2xvcjojYWVhZWFlOyB9Ci5jYmUsIC5jYmUgYTpsaW5rLCAuY2JlIGE6dmlzaXRlZCB7IGNvbG9yOiNiZWJlYmU7IH0KLmNjZSwgLmNjZSBhOmxpbmssIC5jY2UgYTp2aXNpdGVkIHsgY29sb3I6I2NlY2VjZTsgfQouY2RkLCAuY2RkIGE6bGluaywgLmNkZCBhOnZpc2l0ZWQgeyBjb2xvcjojZGRkZGRkOyB9Ci5jYTIgeyBjb2xvcjojYTMwMDAwOyB9CgoucGFnZXRvcCBhOnZpc2l0ZWQgeyBjb2xvcjojMDAwMDAwO30KLnRvcHNlbCBhOmxpbmssIC50b3BzZWwgYTp2aXNpdGVkIHsgY29sb3I6I2ZmZmZmZjsgfQoKLnN1YnRleHQgYTpsaW5rLCAuc3VidGV4dCBhOnZpc2l0ZWQgeyBjb2xvcjojODI4MjgyOyB9Ci5zdWJ0ZXh0IGE6aG92ZXIgeyB0ZXh0LWRlY29yYXRpb246dW5kZXJsaW5lOyB9CgouY29taGVhZCBhOmxpbmssIC5zdWJ0ZXh0IGE6dmlzaXRlZCB7IGNvbG9yOiM4MjgyODI7IH0KLmNvbWhlYWQgYTpob3ZlciB7IHRleHQtZGVjb3JhdGlvbjp1bmRlcmxpbmU7IH0KCi5obm1vcmUgYTpsaW5rLCBhOnZpc2l0ZWQgeyBjb2xvcjojODI4MjgyOyB9Ci5obm1vcmUgeyB0ZXh0LWRlY29yYXRpb246dW5kZXJsaW5lOyB9CgouZGVmYXVsdCBwIHsgbWFyZ2luLXRvcDogOHB4OyBtYXJnaW4tYm90dG9tOiAwcHg7IH0KCi5wYWdlYnJlYWsge3BhZ2UtYnJlYWstYmVmb3JlOmFsd2F5c30KCnByZSB7IG92ZXJmbG93OiBhdXRvOyBwYWRkaW5nOiAycHg7IHdoaXRlLXNwYWNlOiBwcmUtd3JhcDsgb3ZlcmZsb3ctd3JhcDphbnl3aGVyZTsgfQpwcmU6aG92ZXIgeyBvdmVyZmxvdzphdXRvIH0KCi52b3RlYXJyb3cgewogIHdpZHRoOiAgICAgIDEwcHg7CiAgaGVpZ2h0OiAgICAgMTBweDsKICBib3JkZXI6ICAgICAwcHg7CiAgbWFyZ2luOiAgICAgM3B4IDJweCA2cHg7CiAgYmFja2dyb3VuZDogdXJsKCJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUJvWldsbmFIUTlJak15SWlCMmFXVjNRbTk0UFNJd0lEQWdNeklnTVRZaUlIZHBaSFJvUFNJek1pSWdlRzFzYm5NOUltaDBkSEE2THk5M2QzY3Vkek11YjNKbkx6SXdNREF2YzNabklqNDhjR0YwYUNCa1BTSnRNaUF5TnlBeE5DMHlPU0F4TkNBeU9Yb2lJR1pwYkd3OUlpTTVPVGtpTHo0OEwzTjJaejQ9IiksIGxpbmVhci1ncmFkaWVudCh0cmFuc3BhcmVudCwgdHJhbnNwYXJlbnQpIG5vLXJlcGVhdDsKICBiYWNrZ3JvdW5kLXNpemU6IDEwcHg7Cn0KCi52b3RlbGlua3Mubm9zZWUgZGl2LnZvdGVhcnJvdy5yb3RhdGUxODAgewogIGRpc3BsYXk6IG5vbmU7Cn0KCnRhYmxlLnBhZHRhYiB0ZCB7IHBhZGRpbmc6MHB4IDEwcHggfQoKQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAoLXdlYmtpdC1taW4tZGV2aWNlLXBpeGVsLXJhdGlvOiAyKSwgb25seSBzY3JlZW4gYW5kIChtaW4tZGV2aWNlLXBpeGVsLXJhdGlvOiAyKSB7CiAgLnZvdGVhcnJvdyB7CiAgICBiYWNrZ3JvdW5kLXNpemU6IDEwcHg7CiAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEhOMlp5Qm9aV2xuYUhROUlqTXlJaUIyYVdWM1FtOTRQU0l3SURBZ016SWdNVFlpSUhkcFpIUm9QU0l6TWlJZ2VHMXNibk05SW1oMGRIQTZMeTkzZDNjdWR6TXViM0puTHpJd01EQXZjM1puSWo0OGNHRjBhQ0JrUFNKdE1pQXlOeUF4TkMweU9TQXhOQ0F5T1hvaUlHWnBiR3c5SWlNNU9Ua2lMejQ4TDNOMlp6ND0iKSwgbGluZWFyLWdyYWRpZW50KHRyYW5zcGFyZW50LCB0cmFuc3BhcmVudCk7CiAgfQp9Cgoucm90YXRlMTgwIHsKICAtd2Via2l0LXRyYW5zZm9ybTogcm90YXRlKDE4MGRlZyk7ICAvKiBDaHJvbWUgYW5kIG90aGVyIHdlYmtpdCBicm93c2VycyAqLwogIC1tb3otdHJhbnNmb3JtOiAgICByb3RhdGUoMTgwZGVnKTsgIC8qIEZGICovCiAgLW8tdHJhbnNmb3JtOiAgICAgIHJvdGF0ZSgxODBkZWcpOyAgLyogT3BlcmEgKi8KICAtbXMtdHJhbnNmb3JtOiAgICAgcm90YXRlKDE4MGRlZyk7ICAvKiBJRTkgKi8KICB0cmFuc2Zvcm06ICAgICAgICAgcm90YXRlKDE4MGRlZyk7ICAvKiBXM0MgY29tcGxhaW50IGJyb3dzZXJzICovCgogIC8qIElFOCBhbmQgYmVsb3cgKi8KICAtbXMtZmlsdGVyOiAicHJvZ2lkOkRYSW1hZ2VUcmFuc2Zvcm0uTWljcm9zb2Z0Lk1hdHJpeChNMTE9LTEsIE0xMj0wLCBNMjE9MCwgTTIyPS0xLCBEWD0wLCBEWT0wLCBTaXppbmdNZXRob2Q9J2F1dG8gZXhwYW5kJykiOwp9CgovKiBtb2JpbGUgZGV2aWNlICovCkBtZWRpYSBvbmx5IHNjcmVlbgphbmQgKG1pbi13aWR0aCA6IDMwMHB4KQphbmQgKG1heC13aWR0aCA6IDc1MHB4KSB7CiAgI2hubWFpbiB7IHdpZHRoOiAxMDAlOyBtaW4td2lkdGg6IDA7IH0KICBib2R5IHsgcGFkZGluZzogMDsgbWFyZ2luOiAwOyB3aWR0aDogMTAwJTsgfQogIHRkIHsgaGVpZ2h0OiBpbmhlcml0ICFpbXBvcnRhbnQ7IH0KICAudGl0bGUsIC5jb21tZW50IHsgZm9udC1zaXplOiBpbmhlcml0OyAgfQogIHNwYW4ucGFnZXRvcCB7IGRpc3BsYXk6IGJsb2NrOyBtYXJnaW46IDNweCA1cHg7IGZvbnQtc2l6ZTogMTJweDsgbGluZS1oZWlnaHQ6IG5vcm1hbCB9CiAgc3Bhbi5wYWdldG9wIGIgeyBkaXNwbGF5OiBibG9jazsgZm9udC1zaXplOiAxNXB4OyB9CiAgdGFibGUuY29tbWVudC10cmVlIC5jb21tZW50IGEgeyBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IG1heC13aWR0aDogMjAwcHg7IG92ZXJmbG93OiBoaWRkZW47IHdoaXRlLXNwYWNlOiBub3dyYXA7CiAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpczsgdmVydGljYWwtYWxpZ246dG9wOyB9CiAgaW1nW3NyYz0icy5naWYiXVt3aWR0aD0iNDAiXSB7IHdpZHRoOiAxMnB4OyB9CiAgaW1nW3NyYz0icy5naWYiXVt3aWR0aD0iODAiXSB7IHdpZHRoOiAyNHB4OyB9CiAgaW1nW3NyYz0icy5naWYiXVt3aWR0aD0iMTIwIl0geyB3aWR0aDogMzZweDsgfQogIGltZ1tzcmM9InMuZ2lmIl1bd2lkdGg9IjE2MCJdIHsgd2lkdGg6IDQ4cHg7IH0KICBpbWdbc3JjPSJzLmdpZiJdW3dpZHRoPSIyMDAiXSB7IHdpZHRoOiA2MHB4OyB9CiAgaW1nW3NyYz0icy5naWYiXVt3aWR0aD0iMjQwIl0geyB3aWR0aDogNzJweDsgfQogIGltZ1tzcmM9InMuZ2lmIl1bd2lkdGg9IjI4MCJdIHsgd2lkdGg6IDg0cHg7IH0KICBpbWdbc3JjPSJzLmdpZiJdW3dpZHRoPSIzMjAiXSB7IHdpZHRoOiA5NnB4OyB9CiAgaW1nW3NyYz0icy5naWYiXVt3aWR0aD0iMzYwIl0geyB3aWR0aDogMTA4cHg7IH0KICBpbWdbc3JjPSJzLmdpZiJdW3dpZHRoPSI0MDAiXSB7IHdpZHRoOiAxMjBweDsgfQogIGltZ1tzcmM9InMuZ2lmIl1bd2lkdGg9IjQ0MCJdIHsgd2lkdGg6IDEzMnB4OyB9CiAgaW1nW3NyYz0icy5naWYiXVt3aWR0aD0iNDgwIl0geyB3aWR0aDogMTQ0cHg7IH0KICBpbWdbc3JjPSJzLmdpZiJdW3dpZHRoPSI1MjAiXSB7IHdpZHRoOiAxNTZweDsgfQogIGltZ1tzcmM9InMuZ2lmIl1bd2lkdGg9IjU2MCJdIHsgd2lkdGg6IDE2OHB4OyB9CiAgaW1nW3NyYz0icy5naWYiXVt3aWR0aD0iNjAwIl0geyB3aWR0aDogMTgwcHg7IH0KICBpbWdbc3JjPSJzLmdpZiJdW3dpZHRoPSI2NDAiXSB7IHdpZHRoOiAxOTJweDsgfQogIGltZ1tzcmM9InMuZ2lmIl1bd2lkdGg9IjY4MCJdIHsgd2lkdGg6IDIwNHB4OyB9CiAgaW1nW3NyYz0icy5naWYiXVt3aWR0aD0iNzIwIl0geyB3aWR0aDogMjE2cHg7IH0KICBpbWdbc3JjPSJzLmdpZiJdW3dpZHRoPSI3NjAiXSB7IHdpZHRoOiAyMjhweDsgfQogIGltZ1tzcmM9InMuZ2lmIl1bd2lkdGg9IjgwMCJdIHsgd2lkdGg6IDI0MHB4OyB9CiAgaW1nW3NyYz0icy5naWYiXVt3aWR0aD0iODQwIl0geyB3aWR0aDogMjUycHg7IH0KICAudGl0bGUgeyBmb250LXNpemU6IDExcHQ7IGxpbmUtaGVpZ2h0OiAxNHB0OyAgfQogIC5zdWJ0ZXh0IHsgZm9udC1zaXplOiA5cHQ7IH0KICAudm90ZWFycm93IHsgdHJhbnNmb3JtOiBzY2FsZSgxLjMsMS4zKTsgbWFyZ2luLXJpZ2h0OiA2cHg7IH0KICAudm90ZWFycm93LnJvdGF0ZTE4MCB7CiAgICAtd2Via2l0LXRyYW5zZm9ybTogcm90YXRlKDE4MGRlZykgc2NhbGUoMS4zLDEuMyk7ICAvKiBDaHJvbWUgYW5kIG90aGVyIHdlYmtpdCBicm93c2VycyAqLwogICAgLW1vei10cmFuc2Zvcm06ICAgIHJvdGF0ZSgxODBkZWcpIHNjYWxlKDEuMywxLjMpOyAgLyogRkYgKi8KICAgIC1vLXRyYW5zZm9ybTogICAgICByb3RhdGUoMTgwZGVnKSBzY2FsZSgxLjMsMS4zKTsgIC8qIE9wZXJhICovCiAgICAtbXMtdHJhbnNmb3JtOiAgICAgcm90YXRlKDE4MGRlZykgc2NhbGUoMS4zLDEuMyk7ICAvKiBJRTkgKi8KICAgIHRyYW5zZm9ybTogICAgICAgICByb3RhdGUoMTgwZGVnKSBzY2FsZSgxLjMsMS4zKTsgIC8qIFczQyBjb21wbGFpbnQgYnJvd3NlcnMgKi8KICB9CiAgLnZvdGVsaW5rcyB7IG1pbi13aWR0aDogMThweDsgfQogIC52b3RlbGlua3MgYSB7IGRpc3BsYXk6IGJsb2NrOyBtYXJnaW4tYm90dG9tOiA5cHg7IH0KICBpbnB1dFt0eXBlPSJ0ZXh0Il0sIGlucHV0W3R5cGU9Im51bWJlciJdLCB0ZXh0YXJlYSB7IGZvbnQtc2l6ZTogMTZweDsgd2lkdGg6IDkwJTsgfQp9CgouY29tbWVudCB7IG1heC13aWR0aDogMTIxNXB4OyBvdmVyZmxvdy13cmFwOmFueXdoZXJlOyB9CgoKCkBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1pbi13aWR0aCA6IDMwMHB4KSBhbmQgKG1heC13aWR0aCA6IDM4OXB4KSB7CiAgLmNvbW1lbnQgeyBtYXgtd2lkdGg6IDI3MHB4OyBvdmVyZmxvdzogaGlkZGVuIH0KfQpAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtaW4td2lkdGggOiAzOTBweCkgYW5kIChtYXgtd2lkdGggOiA1MDlweCkgewogIC5jb21tZW50IHsgbWF4LXdpZHRoOiAzNTBweDsgb3ZlcmZsb3c6IGhpZGRlbiB9Cn0KQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWluLXdpZHRoIDogNTEwcHgpIGFuZCAobWF4LXdpZHRoIDogNTk5cHgpIHsKICAuY29tbWVudCB7IG1heC13aWR0aDogNDYwcHg7IG92ZXJmbG93OiBoaWRkZW4gfQp9CkBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1pbi13aWR0aCA6IDYwMHB4KSBhbmQgKG1heC13aWR0aCA6IDY4OXB4KSB7CiAgLmNvbW1lbnQgeyBtYXgtd2lkdGg6IDU0MHB4OyBvdmVyZmxvdzogaGlkZGVuIH0KfQpAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtaW4td2lkdGggOiA2OTBweCkgYW5kIChtYXgtd2lkdGggOiA4MDlweCkgewogIC5jb21tZW50IHsgbWF4LXdpZHRoOiA2MjBweDsgb3ZlcmZsb3c6IGhpZGRlbiB9Cn0KQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWluLXdpZHRoIDogODEwcHgpIGFuZCAobWF4LXdpZHRoIDogODk5cHgpIHsKICAuY29tbWVudCB7IG1heC13aWR0aDogNzMwcHg7IG92ZXJmbG93OiBoaWRkZW4gfQp9CkBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1pbi13aWR0aCA6IDkwMHB4KSBhbmQgKG1heC13aWR0aCA6IDEwNzlweCkgewogIC5jb21tZW50IHsgbWF4LXdpZHRoOiA4MTBweDsgb3ZlcmZsb3c6IGhpZGRlbiB9Cn0KQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWluLXdpZHRoIDogMTA4MHB4KSBhbmQgKG1heC13aWR0aCA6IDExNjlweCkgewogIC5jb21tZW50IHsgbWF4LXdpZHRoOiA5NzBweDsgb3ZlcmZsb3c6IGhpZGRlbiB9Cn0KQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWluLXdpZHRoIDogMTE3MHB4KSBhbmQgKG1heC13aWR0aCA6IDEyNTlweCkgewogIC5jb21tZW50IHsgbWF4LXdpZHRoOiAxMDUwcHg7IG92ZXJmbG93OiBoaWRkZW4gfQp9CkBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1pbi13aWR0aCA6IDEyNjBweCkgYW5kIChtYXgtd2lkdGggOiAxMzQ5cHgpIHsKICAuY29tbWVudCB7IG1heC13aWR0aDogMTEzMHB4OyBvdmVyZmxvdzogaGlkZGVuIH0KfQo=">
        <link rel="icon" href="data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjE4IiB2aWV3Qm94PSI0IDQgMTg4IDE4OCIgd2lkdGg9IjE4IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Im00IDRoMTg4djE4OGgtMTg4eiIgZmlsbD0iI2Y2MCIvPjxwYXRoIGQ9Im03My4yNTIxNzU2IDQ1LjAxIDIyLjc0NzgyNDQgNDcuMzkxMzAwODMgMjIuNzQ3ODI0NC00Ny4zOTEzMDA4M2gxOS41NjU2OTYzMWwtMzQuMzIzNTIwNzEgNjQuNDg2NjE0Njh2NDEuNDkzMzg1MzJoLTE1Ljk4di00MS40OTMzODUzMmwtMzQuMzIzNTIwNzEtNjQuNDg2NjE0Njh6IiBmaWxsPSIjZmZmIi8+PC9zdmc+">
    <link rel="canonical" href="https://news.ycombinator.com/item?id=42439654">            <title>Fixing C Strings | Hacker News</title><meta name="robots" content="none"></meta></head><body><center><table id="hnmain" border="0" cellpadding="0" cellspacing="0" width="85%" bgcolor="#f6f6ef">
        <tbody><tr><td bgcolor="#ff6600"><table border="0" cellpadding="0" cellspacing="0" width="100%" style="padding:2px"><tbody><tr><td style="width:18px;padding-right:4px"><a href="https://news.ycombinator.com"><img src="data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjE4IiB2aWV3Qm94PSI0IDQgMTg4IDE4OCIgd2lkdGg9IjE4IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Im00IDRoMTg4djE4OGgtMTg4eiIgZmlsbD0iI2Y2MCIvPjxwYXRoIGQ9Im03My4yNTIxNzU2IDQ1LjAxIDIyLjc0NzgyNDQgNDcuMzkxMzAwODMgMjIuNzQ3ODI0NC00Ny4zOTEzMDA4M2gxOS41NjU2OTYzMWwtMzQuMzIzNTIwNzEgNjQuNDg2NjE0Njh2NDEuNDkzMzg1MzJoLTE1Ljk4di00MS40OTMzODUzMmwtMzQuMzIzNTIwNzEtNjQuNDg2NjE0Njh6IiBmaWxsPSIjZmZmIi8+PC9zdmc+" width="18" height="18" style="border:1px white solid; display:block"></a></td>
                  <td style="line-height:12pt; height:10px;"><span class="pagetop"><b class="hnname"><a href="https://news.ycombinator.com/news">Hacker News</a></b>
                            <a href="https://news.ycombinator.com/newest">new</a> | <a href="https://news.ycombinator.com/front">past</a> | <a href="https://news.ycombinator.com/newcomments">comments</a> | <a href="https://news.ycombinator.com/ask">ask</a> | <a href="https://news.ycombinator.com/show">show</a> | <a href="https://news.ycombinator.com/jobs">jobs</a> | <a href="https://news.ycombinator.com/submit" rel="nofollow">submit</a>            </span></td><td style="text-align:right;padding-right:4px;"><span class="pagetop">
                              <a href="https://news.ycombinator.com/login?goto=item%3Fid%3D42439654">login</a>
                          </span></td>
              </tr></tbody></table></td></tr>
<tr id="pagespace" title="Fixing C Strings" style="height:10px"></tr><tr><td><table class="fatitem" border="0">
        <tbody><tr class="athing submission" id="42439654">
      <td align="right" valign="top" class="title"><span class="rank"></span></td>      <td valign="top" class="votelinks"><center><a id="up_42439654" href="https://news.ycombinator.com/vote?id=42439654&amp;how=up&amp;goto=item%3Fid%3D42439654"><div class="votearrow" title="upvote"></div></a></center></td><td class="title"><span class="titleline"><a href="https://thasso.xyz/2024/12/16/fixing-c-strings.html">Fixing C Strings</a><span class="sitebit comhead"> (<a href="https://news.ycombinator.com/from?site=thasso.xyz"><span class="sitestr">thasso.xyz</span></a>)</span></span></td></tr><tr><td colspan="2"></td><td class="subtext"><span class="subline">
          <span class="score" id="score_42439654">32 points</span> by <a href="https://news.ycombinator.com/user?id=ushakov" class="hnuser">ushakov</a> <span class="age" title="2024-12-17T09:00:11 1734426011"><a href="https://news.ycombinator.com/item?id=42439654">4 months ago</a></span> <span id="unv_42439654"></span> | <a href="https://news.ycombinator.com/hide?id=42439654&amp;goto=item%3Fid%3D42439654">hide</a> | <a href="https://hn.algolia.com/?query=Fixing%20C%20Strings&amp;type=story&amp;dateRange=all&amp;sort=byDate&amp;storyText=false&amp;prefix&amp;page=0" class="hnpast">past</a> | <a href="https://news.ycombinator.com/fave?id=42439654&amp;auth=38015b6069c8911722cd8921cf88404810b6379a">favorite</a> | <a href="https://news.ycombinator.com/item?id=42439654">65&nbsp;comments</a>        </span>
              </td></tr>
        </tbody></table><br><br><table border="0" class="comment-tree">
            <tbody><tr class="athing comtr" id="42482383"><td><table border="0">  <tbody><tr>    <td class="ind" indent="0"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="0"></td><td valign="top" class="votelinks">
      <center><a id="up_42482383" href="https://news.ycombinator.com/vote?id=42482383&amp;how=up&amp;goto=item%3Fid%3D42439654"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=WalterBright" class="hnuser">WalterBright</a> <span class="age" title="2024-12-21T21:17:27 1734815847"><a href="https://news.ycombinator.com/item?id=42482383">4 months ago</a></span> <span id="unv_42482383"></span>          <span class="navs">
             | <a href="#42482255" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="42482383" n="23" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00"><p></p><pre><code>    struct str {
     char *dat;
     sz len;
    };
</code></pre>
It's the same solution D uses, except that it's a builtin type, and works for all arrays. I proposed this solution for C:<p><a href="https://www.digitalmars.com/articles/C-biggest-mistake.html" rel="nofollow">https://www.digitalmars.com/articles/C-biggest-mistake.html</a></p><p>It's hard to overstate what a <i>huge</i> win this is. D has had 23 years of experience with it, and the virtual elimination of array overflow bugs is just win, win, win.</p><p>I will never understand why C keeps adding extensions consisting of marginal features, and ignores this foundational fix. I guess they still aren't tired of buffer overflow bugs always being the #1 security vulnerability of shipped C code (and C++, too!).</p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="42482875"><td><table border="0">  <tbody><tr>    <td class="ind" indent="1"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="40"></td><td valign="top" class="votelinks">
      <center><a id="up_42482875" href="https://news.ycombinator.com/vote?id=42482875&amp;how=up&amp;goto=item%3Fid%3D42439654"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=Levitating" class="hnuser">Levitating</a> <span class="age" title="2024-12-21T22:32:16 1734820336"><a href="https://news.ycombinator.com/item?id=42482875">4 months ago</a></span> <span id="unv_42482875"></span>          <span class="navs">
             | <a href="#42482383" class="clicky" aria-hidden="true">parent</a> | <a href="#42483225" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="42482875" n="2" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">&gt; It's the same solution D uses<p>As well as most other languages and many C codebases right?
Often with a separate length/capacity so the buffer can be larger than the string.</p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="42483590"><td><table border="0">  <tbody><tr>    <td class="ind" indent="2"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="80"></td><td valign="top" class="votelinks">
      <center><a id="up_42483590" href="https://news.ycombinator.com/vote?id=42483590&amp;how=up&amp;goto=item%3Fid%3D42439654"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=WalterBright" class="hnuser">WalterBright</a> <span class="age" title="2024-12-22T00:52:48 1734828768"><a href="https://news.ycombinator.com/item?id=42483590">4 months ago</a></span> <span id="unv_42483590"></span>          <span class="navs">
             | <a href="#42482383" class="clicky" aria-hidden="true">root</a> | <a href="#42482875" class="clicky" aria-hidden="true">parent</a> | <a href="#42483225" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="42483590" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">True, but it turns out that very few arrays need to be resizeable.</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                  <tr class="athing comtr" id="42483225"><td><table border="0">  <tbody><tr>    <td class="ind" indent="1"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="40"></td><td valign="top" class="votelinks">
      <center><a id="up_42483225" href="https://news.ycombinator.com/vote?id=42483225&amp;how=up&amp;goto=item%3Fid%3D42439654"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=volemo" class="hnuser">volemo</a> <span class="age" title="2024-12-21T23:38:53 1734824333"><a href="https://news.ycombinator.com/item?id=42483225">4 months ago</a></span> <span id="unv_42483225"></span>          <span class="navs">
             | <a href="#42482383" class="clicky" aria-hidden="true">parent</a> | <a href="#42482875" class="clicky" aria-hidden="true">prev</a> | <a href="#42483260" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="42483225" n="3" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">Why this and not?<p></p><pre><code>    struct str {
     sz len;
     char dat[];
    };</code></pre></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="42483612"><td><table border="0">  <tbody><tr>    <td class="ind" indent="2"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="80"></td><td valign="top" class="votelinks">
      <center><a id="up_42483612" href="https://news.ycombinator.com/vote?id=42483612&amp;how=up&amp;goto=item%3Fid%3D42439654"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=WalterBright" class="hnuser">WalterBright</a> <span class="age" title="2024-12-22T00:55:56 1734828956"><a href="https://news.ycombinator.com/item?id=42483612">4 months ago</a></span> <span id="unv_42483612"></span>          <span class="navs">
             | <a href="#42482383" class="clicky" aria-hidden="true">root</a> | <a href="#42483225" class="clicky" aria-hidden="true">parent</a> | <a href="#42483455" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="42483612" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">Those are called "length prefixed strings", or more simply "Pascal strings". The difficulty is one has to reallocate and copy to represent a substring.</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
            <tr class="athing comtr" id="42483455"><td><table border="0">  <tbody><tr>    <td class="ind" indent="2"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="80"></td><td valign="top" class="votelinks">
      <center><a id="up_42483455" href="https://news.ycombinator.com/vote?id=42483455&amp;how=up&amp;goto=item%3Fid%3D42439654"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=b3orn" class="hnuser">b3orn</a> <span class="age" title="2024-12-22T00:23:21 1734827001"><a href="https://news.ycombinator.com/item?id=42483455">4 months ago</a></span> <span id="unv_42483455"></span>          <span class="navs">
             | <a href="#42482383" class="clicky" aria-hidden="true">root</a> | <a href="#42483225" class="clicky" aria-hidden="true">parent</a> | <a href="#42483612" class="clicky" aria-hidden="true">prev</a> | <a href="#42483260" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="42483455" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">Having a pointer in the struct allows you to increase the string's capacity without changing all the references to it.</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                  <tr class="athing comtr" id="42483260"><td><table border="0">  <tbody><tr>    <td class="ind" indent="1"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="40"></td><td valign="top" class="votelinks">
      <center><a id="up_42483260" href="https://news.ycombinator.com/vote?id=42483260&amp;how=up&amp;goto=item%3Fid%3D42439654"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=wat10000" class="hnuser">wat10000</a> <span class="age" title="2024-12-21T23:45:33 1734824733"><a href="https://news.ycombinator.com/item?id=42483260">4 months ago</a></span> <span id="unv_42483260"></span>          <span class="navs">
             | <a href="#42482383" class="clicky" aria-hidden="true">parent</a> | <a href="#42483225" class="clicky" aria-hidden="true">prev</a> | <a href="#42482941" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="42483260" n="3" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">Changing pointers to include length would require an ABI break on pretty much all platforms. You’d either have to recompile the world or have some sort of bridging thing that converts calls from C-with-fat-pointers to standard C. And even recompiling the world wouldn’t be enough, since lots of C code relies on being able to do things like cast pointers to integers, manipulate them as numbers, then cast them back. That’s UB by the standard but platforms and compilers can and often do define that behavior to be something useful.<p>You could say, well, forget binary compatibility and forget nasty code that bit-twiddles pointers. But then why are you even using C? Those are the things that set it apart.</p><p>Clang is trying to solve this with annotations that allow the programmer to construct fat pointers, either as structures or just implicitly by having the length in a variable somewhere, and enforcing those bounds in the compiler. Seems promising. <a href="https://clang.llvm.org/docs/BoundsSafetyImplPlans.html" rel="nofollow">https://clang.llvm.org/docs/BoundsSafetyImplPlans.html</a></p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="42483601"><td><table border="0">  <tbody><tr>    <td class="ind" indent="2"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="80"></td><td valign="top" class="votelinks">
      <center><a id="up_42483601" href="https://news.ycombinator.com/vote?id=42483601&amp;how=up&amp;goto=item%3Fid%3D42439654"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=WalterBright" class="hnuser">WalterBright</a> <span class="age" title="2024-12-22T00:54:14 1734828854"><a href="https://news.ycombinator.com/item?id=42483601">4 months ago</a></span> <span id="unv_42483601"></span>          <span class="navs">
             | <a href="#42482383" class="clicky" aria-hidden="true">root</a> | <a href="#42483260" class="clicky" aria-hidden="true">parent</a> | <a href="#42483456" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="42483601" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">&gt; Changing pointers to include length would require an ABI break on pretty much all platforms.<p>Fixed with my proposal: <a href="https://www.digitalmars.com/articles/C-biggest-mistake.html" rel="nofollow">https://www.digitalmars.com/articles/C-biggest-mistake.html</a></p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
            <tr class="athing comtr" id="42483456"><td><table border="0">  <tbody><tr>    <td class="ind" indent="2"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="80"></td><td valign="top" class="votelinks">
      <center><a id="up_42483456" href="https://news.ycombinator.com/vote?id=42483456&amp;how=up&amp;goto=item%3Fid%3D42439654"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=Gibbon1" class="hnuser">Gibbon1</a> <span class="age" title="2024-12-22T00:23:26 1734827006"><a href="https://news.ycombinator.com/item?id=42483456">4 months ago</a></span> <span id="unv_42483456"></span>          <span class="navs">
             | <a href="#42482383" class="clicky" aria-hidden="true">root</a> | <a href="#42483260" class="clicky" aria-hidden="true">parent</a> | <a href="#42483601" class="clicky" aria-hidden="true">prev</a> | <a href="#42482941" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="42483456" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">Yeah but not having standard buffer and slice types along with safe API's that require their use is unforgivable.<p>I'm also of the opinion that a backwards compatibility with null terminated string is actually terrible. Because you want people to eventually go, oh this code uses gross null terminated strings, lets fix that.</p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                  <tr class="athing comtr" id="42482941"><td><table border="0">  <tbody><tr>    <td class="ind" indent="1"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="40"></td><td valign="top" class="votelinks">
      <center><a id="up_42482941" href="https://news.ycombinator.com/vote?id=42482941&amp;how=up&amp;goto=item%3Fid%3D42439654"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=Koshkin" class="hnuser">Koshkin</a> <span class="age" title="2024-12-21T22:45:36 1734821136"><a href="https://news.ycombinator.com/item?id=42482941">4 months ago</a></span> <span id="unv_42482941"></span>          <span class="navs">
             | <a href="#42482383" class="clicky" aria-hidden="true">parent</a> | <a href="#42483260" class="clicky" aria-hidden="true">prev</a> | <a href="#42482255" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="42482941" n="14" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">&gt; <i>I will never understand why C keeps</i><p>Well, I, for one, do like the idea of C (in contrast to D or C++) still being sort of the lowest-level high-level programming language - one that's just a notch above the assembler.</p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="42483040"><td><table border="0">  <tbody><tr>    <td class="ind" indent="2"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="80"></td><td valign="top" class="votelinks">
      <center><a id="up_42483040" href="https://news.ycombinator.com/vote?id=42483040&amp;how=up&amp;goto=item%3Fid%3D42439654"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=gizmo686" class="hnuser">gizmo686</a> <span class="age" title="2024-12-21T23:02:45 1734822165"><a href="https://news.ycombinator.com/item?id=42483040">4 months ago</a></span> <span id="unv_42483040"></span>          <span class="navs">
             | <a href="#42482383" class="clicky" aria-hidden="true">root</a> | <a href="#42482941" class="clicky" aria-hidden="true">parent</a> | <a href="#42483080" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="42483040" n="4" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">There is nothing particuarly low level about null terminated strings. It is just a convention that a bunch of standard library functions follow. Then there is a dozen variants of each of those standard library functions, most of which end up making you pass in some form of a length parameter anyway, because the convention is so terrible.<p>At this point, I think we might be in a better world if C simply did not offer any string API in the first place. If</p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="42483150"><td><table border="0">  <tbody><tr>    <td class="ind" indent="3"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="120"></td><td valign="top" class="votelinks">
      <center><a id="up_42483150" href="https://news.ycombinator.com/vote?id=42483150&amp;how=up&amp;goto=item%3Fid%3D42439654"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=yuliyp" class="hnuser">yuliyp</a> <span class="age" title="2024-12-21T23:23:47 1734823427"><a href="https://news.ycombinator.com/item?id=42483150">4 months ago</a></span> <span id="unv_42483150"></span>          <span class="navs">
             | <a href="#42482383" class="clicky" aria-hidden="true">root</a> | <a href="#42483040" class="clicky" aria-hidden="true">parent</a> | <a href="#42486584" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="42483150" n="2" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">Did your comment get cut off because you embedded a null inside it?</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="42483222"><td><table border="0">  <tbody><tr>    <td class="ind" indent="4"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="160"></td><td valign="top" class="votelinks">
      <center><a id="up_42483222" href="https://news.ycombinator.com/vote?id=42483222&amp;how=up&amp;goto=item%3Fid%3D42439654"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=fuzztester" class="hnuser">fuzztester</a> <span class="age" title="2024-12-21T23:38:42 1734824322"><a href="https://news.ycombinator.com/item?id=42483222">4 months ago</a></span> <span id="unv_42483222"></span>          <span class="navs">
             | <a href="#42482383" class="clicky" aria-hidden="true">root</a> | <a href="#42483150" class="clicky" aria-hidden="true">parent</a> | <a href="#42486584" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="42483222" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">ye</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                  <tr class="athing comtr" id="42486584"><td><table border="0">  <tbody><tr>    <td class="ind" indent="3"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="120"></td><td valign="top" class="votelinks">
      <center><a id="up_42486584" href="https://news.ycombinator.com/vote?id=42486584&amp;how=up&amp;goto=item%3Fid%3D42439654"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=Koshkin" class="hnuser">Koshkin</a> <span class="age" title="2024-12-22T14:41:06 1734878466"><a href="https://news.ycombinator.com/item?id=42486584">4 months ago</a></span> <span id="unv_42486584"></span>          <span class="navs">
             | <a href="#42482383" class="clicky" aria-hidden="true">root</a> | <a href="#42483040" class="clicky" aria-hidden="true">parent</a> | <a href="#42483150" class="clicky" aria-hidden="true">prev</a> | <a href="#42483080" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="42486584" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">&gt; <i>It is just a convention that a bunch of standard library</i><p>That’s not true, this representation of strings (in the form of a literal) is built into the language itself.</p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                  <tr class="athing comtr" id="42483080"><td><table border="0">  <tbody><tr>    <td class="ind" indent="2"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="80"></td><td valign="top" class="votelinks">
      <center><a id="up_42483080" href="https://news.ycombinator.com/vote?id=42483080&amp;how=up&amp;goto=item%3Fid%3D42439654"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=II2II" class="hnuser">II2II</a> <span class="age" title="2024-12-21T23:09:57 1734822597"><a href="https://news.ycombinator.com/item?id=42483080">4 months ago</a></span> <span id="unv_42483080"></span>          <span class="navs">
             | <a href="#42482383" class="clicky" aria-hidden="true">root</a> | <a href="#42482941" class="clicky" aria-hidden="true">parent</a> | <a href="#42483040" class="clicky" aria-hidden="true">prev</a> | <a href="#42483195" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="42483080" n="2" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">Expressing strings as null terminated or in a data structure that includes the size and data has no relationship to it being a higher or lower level language. They still need to determine where a string starts and ends in memory. The means of doing so is different, the assembly language representation will be slightly different, but the language isn't hiding anything behind an abstraction. Contrast that to, say, Pascal where the length of the string is hidden from the developer and can only be accessed through function calls. (It probably should be, but that is beside the point.)</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="42483144"><td><table border="0">  <tbody><tr>    <td class="ind" indent="3"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="120"></td><td valign="top" class="votelinks">
      <center><a id="up_42483144" href="https://news.ycombinator.com/vote?id=42483144&amp;how=up&amp;goto=item%3Fid%3D42439654"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=pjmlp" class="hnuser">pjmlp</a> <span class="age" title="2024-12-21T23:23:08 1734823388"><a href="https://news.ycombinator.com/item?id=42483144">4 months ago</a></span> <span id="unv_42483144"></span>          <span class="navs">
             | <a href="#42482383" class="clicky" aria-hidden="true">root</a> | <a href="#42483080" class="clicky" aria-hidden="true">parent</a> | <a href="#42483195" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="42483144" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">Depending on the Pascal implementation, the length might be accessible actually, but better not mess directly with it.</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                  <tr class="athing comtr" id="42483195"><td><table border="0">  <tbody><tr>    <td class="ind" indent="2"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="80"></td><td valign="top" class="votelinks">
      <center><a id="up_42483195" href="https://news.ycombinator.com/vote?id=42483195&amp;how=up&amp;goto=item%3Fid%3D42439654"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=gf000" class="hnuser">gf000</a> <span class="age" title="2024-12-21T23:32:09 1734823929"><a href="https://news.ycombinator.com/item?id=42483195">4 months ago</a></span> <span id="unv_42483195"></span>          <span class="navs">
             | <a href="#42482383" class="clicky" aria-hidden="true">root</a> | <a href="#42482941" class="clicky" aria-hidden="true">parent</a> | <a href="#42483080" class="clicky" aria-hidden="true">prev</a> | <a href="#42483623" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="42483195" n="2" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">&gt; one that's just a notch above the assembler.<p>That has never been true, unless you are writing programs against a PDP-11. C compilers can change even the O complexity of your algorithms, it's nowhere close to assembly.</p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="42484979"><td><table border="0">  <tbody><tr>    <td class="ind" indent="3"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="120"></td><td valign="top" class="votelinks">
      <center><a id="up_42484979" href="https://news.ycombinator.com/vote?id=42484979&amp;how=up&amp;goto=item%3Fid%3D42439654"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=teo_zero" class="hnuser">teo_zero</a> <span class="age" title="2024-12-22T07:54:44 1734854084"><a href="https://news.ycombinator.com/item?id=42484979">4 months ago</a></span> <span id="unv_42484979"></span>          <span class="navs">
             | <a href="#42482383" class="clicky" aria-hidden="true">root</a> | <a href="#42483195" class="clicky" aria-hidden="true">parent</a> | <a href="#42483623" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="42484979" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">&gt; C compilers can change even the O complexity of your algorithms<p>I'd be curious to see an example...</p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                  <tr class="athing comtr" id="42483623"><td><table border="0">  <tbody><tr>    <td class="ind" indent="2"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="80"></td><td valign="top" class="votelinks">
      <center><a id="up_42483623" href="https://news.ycombinator.com/vote?id=42483623&amp;how=up&amp;goto=item%3Fid%3D42439654"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=WalterBright" class="hnuser">WalterBright</a> <span class="age" title="2024-12-22T00:57:45 1734829065"><a href="https://news.ycombinator.com/item?id=42483623">4 months ago</a></span> <span id="unv_42483623"></span>          <span class="navs">
             | <a href="#42482383" class="clicky" aria-hidden="true">root</a> | <a href="#42482941" class="clicky" aria-hidden="true">parent</a> | <a href="#42483195" class="clicky" aria-hidden="true">prev</a> | <a href="#42483123" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="42483623" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">My proposal <a href="https://www.digitalmars.com/articles/C-biggest-mistake.html" rel="nofollow">https://www.digitalmars.com/articles/C-biggest-mistake.html</a> does not take anything away from C's low level abilities.</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
            <tr class="athing comtr" id="42483123"><td><table border="0">  <tbody><tr>    <td class="ind" indent="2"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="80"></td><td valign="top" class="votelinks">
      <center><a id="up_42483123" href="https://news.ycombinator.com/vote?id=42483123&amp;how=up&amp;goto=item%3Fid%3D42439654"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=pjmlp" class="hnuser">pjmlp</a> <span class="age" title="2024-12-21T23:19:44 1734823184"><a href="https://news.ycombinator.com/item?id=42483123">4 months ago</a></span> <span id="unv_42483123"></span>          <span class="navs">
             | <a href="#42482383" class="clicky" aria-hidden="true">root</a> | <a href="#42482941" class="clicky" aria-hidden="true">parent</a> | <a href="#42483623" class="clicky" aria-hidden="true">prev</a> | <a href="#42482999" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="42483123" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">The usual C mythology continuously spread since the mists of UNIX epoch.</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
            <tr class="athing comtr" id="42482999"><td><table border="0">  <tbody><tr>    <td class="ind" indent="2"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="80"></td><td valign="top" class="votelinks">
      <center><a id="up_42482999" href="https://news.ycombinator.com/vote?id=42482999&amp;how=up&amp;goto=item%3Fid%3D42439654"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=gpderetta" class="hnuser">gpderetta</a> <span class="age" title="2024-12-21T22:55:32 1734821732"><a href="https://news.ycombinator.com/item?id=42482999">4 months ago</a></span> <span id="unv_42482999"></span>          <span class="navs">
             | <a href="#42482383" class="clicky" aria-hidden="true">root</a> | <a href="#42482941" class="clicky" aria-hidden="true">parent</a> | <a href="#42483123" class="clicky" aria-hidden="true">prev</a> | <a href="#42482255" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="42482999" n="3" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">What's lower level on C compared to C++ or D?</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="42483652"><td><table border="0">  <tbody><tr>    <td class="ind" indent="3"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="120"></td><td valign="top" class="votelinks">
      <center><a id="up_42483652" href="https://news.ycombinator.com/vote?id=42483652&amp;how=up&amp;goto=item%3Fid%3D42439654"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=WalterBright" class="hnuser">WalterBright</a> <span class="age" title="2024-12-22T01:05:54 1734829554"><a href="https://news.ycombinator.com/item?id=42483652">4 months ago</a></span> <span id="unv_42483652"></span>          <span class="navs">
             | <a href="#42482383" class="clicky" aria-hidden="true">root</a> | <a href="#42482999" class="clicky" aria-hidden="true">parent</a> | <a href="#42482255" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="42483652" n="2" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">Nothing. You can get just as down and dirty in D as you can in C. You just don't have to suffer under the preprocessor as it blasts your kingdom. And you've got a fully functional inline assembler, and modules.</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="42486609"><td><table border="0">  <tbody><tr>    <td class="ind" indent="4"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="160"></td><td valign="top" class="votelinks">
      <center><a id="up_42486609" href="https://news.ycombinator.com/vote?id=42486609&amp;how=up&amp;goto=item%3Fid%3D42439654"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=Koshkin" class="hnuser">Koshkin</a> <span class="age" title="2024-12-22T14:44:21 1734878661"><a href="https://news.ycombinator.com/item?id=42486609">4 months ago</a></span> <span id="unv_42486609"></span>          <span class="navs">
             | <a href="#42482383" class="clicky" aria-hidden="true">root</a> | <a href="#42483652" class="clicky" aria-hidden="true">parent</a> | <a href="#42482255" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="42486609" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">I have heard about an object-oriented assembler (never seen one, though).</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                                    <tr class="athing comtr" id="42482255"><td><table border="0">  <tbody><tr>    <td class="ind" indent="0"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="0"></td><td valign="top" class="votelinks">
      <center><a id="up_42482255" href="https://news.ycombinator.com/vote?id=42482255&amp;how=up&amp;goto=item%3Fid%3D42439654"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=kevin_thibedeau" class="hnuser">kevin_thibedeau</a> <span class="age" title="2024-12-21T21:01:11 1734814871"><a href="https://news.ycombinator.com/item?id=42482255">4 months ago</a></span> <span id="unv_42482255"></span>          <span class="navs">
             | <a href="#42482383" class="clicky" aria-hidden="true">prev</a> | <a href="#42446774" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="42482255" n="7" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">&gt; Current compilers warn you if the format string doesn’t match its arguments. But this only works on functions that have the same signature as printf so it doesn’t work on my implementation.<p>GCC has the format attribute that lets you have printf type checking on your own variadic functions:</p><p><a href="https://gcc.gnu.org/onlinedocs/gcc-14.2.0/gcc/Common-Function-Attributes.html#index-Wformat-3" rel="nofollow">https://gcc.gnu.org/onlinedocs/gcc-14.2.0/gcc/Common-Functio...</a></p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="42482357"><td><table border="0">  <tbody><tr>    <td class="ind" indent="1"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="40"></td><td valign="top" class="votelinks">
      <center><a id="up_42482357" href="https://news.ycombinator.com/vote?id=42482357&amp;how=up&amp;goto=item%3Fid%3D42439654"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=WalterBright" class="hnuser">WalterBright</a> <span class="age" title="2024-12-21T21:14:52 1734815692"><a href="https://news.ycombinator.com/item?id=42482357">4 months ago</a></span> <span id="unv_42482357"></span>          <span class="navs">
             | <a href="#42482255" class="clicky" aria-hidden="true">parent</a> | <a href="#42484285" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="42482357" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">So does D:<p><a href="https://dlang.org/spec/pragma.html#printf" rel="nofollow">https://dlang.org/spec/pragma.html#printf</a></p><p>It was a huge win, at least for me. I implemented it because I was really sick of mismatches. (Although I was careful to use the right formats, when refactoring I'd change a type and then the printf's would go awry. Having the compiler flag them made for quick fixing.)</p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
            <tr class="athing comtr" id="42484285"><td><table border="0">  <tbody><tr>    <td class="ind" indent="1"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="40"></td><td valign="top" class="votelinks">
      <center><a id="up_42484285" href="https://news.ycombinator.com/vote?id=42484285&amp;how=up&amp;goto=item%3Fid%3D42439654"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=samatman" class="hnuser">samatman</a> <span class="age" title="2024-12-22T03:55:37 1734839737"><a href="https://news.ycombinator.com/item?id=42484285">4 months ago</a></span> <span id="unv_42484285"></span>          <span class="navs">
             | <a href="#42482255" class="clicky" aria-hidden="true">parent</a> | <a href="#42482357" class="clicky" aria-hidden="true">prev</a> | <a href="#42483002" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="42484285" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">Zig builds string formatting at comptime, so if the format string doesn't match the arguments, the program won't compile. It's nice.</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
            <tr class="athing comtr" id="42483002"><td><table border="0">  <tbody><tr>    <td class="ind" indent="1"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="40"></td><td valign="top" class="votelinks">
      <center><a id="up_42483002" href="https://news.ycombinator.com/vote?id=42483002&amp;how=up&amp;goto=item%3Fid%3D42439654"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=norir" class="hnuser">norir</a> <span class="age" title="2024-12-21T22:56:31 1734821791"><a href="https://news.ycombinator.com/item?id=42483002">4 months ago</a></span> <span id="unv_42483002"></span>          <span class="navs">
             | <a href="#42482255" class="clicky" aria-hidden="true">parent</a> | <a href="#42484285" class="clicky" aria-hidden="true">prev</a> | <a href="#42446774" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="42483002" n="4" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">Format strings are a technique that I think largely should be left behind anyway. String interpolation is in my experience usually shorter, easier to read and will always be checked by the compiler.</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="42483043"><td><table border="0">  <tbody><tr>    <td class="ind" indent="2"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="80"></td><td valign="top" class="votelinks">
      <center><a id="up_42483043" href="https://news.ycombinator.com/vote?id=42483043&amp;how=up&amp;goto=item%3Fid%3D42439654"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=jonhohle" class="hnuser">jonhohle</a> <span class="age" title="2024-12-21T23:03:12 1734822192"><a href="https://news.ycombinator.com/item?id=42483043">4 months ago</a></span> <span id="unv_42483043"></span>          <span class="navs">
             | <a href="#42482255" class="clicky" aria-hidden="true">root</a> | <a href="#42483002" class="clicky" aria-hidden="true">parent</a> | <a href="#42446774" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="42483043" n="3" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">It’s shorter until you need any type of formatting. It’s hard to get more terse than `%8.2f`.</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="42483119"><td><table border="0">  <tbody><tr>    <td class="ind" indent="3"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="120"></td><td valign="top" class="votelinks">
      <center><a id="up_42483119" href="https://news.ycombinator.com/vote?id=42483119&amp;how=up&amp;goto=item%3Fid%3D42439654"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=gizmo686" class="hnuser">gizmo686</a> <span class="age" title="2024-12-21T23:18:49 1734823129"><a href="https://news.ycombinator.com/item?id=42483119">4 months ago</a></span> <span id="unv_42483119"></span>          <span class="navs">
             | <a href="#42482255" class="clicky" aria-hidden="true">root</a> | <a href="#42483043" class="clicky" aria-hidden="true">parent</a> | <a href="#42483120" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="42483119" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">You can do that with string interpolation too. In python it would be:<p></p><pre><code>    print(f"{foo:8.2f}")
</code></pre>
compared with C-style printf:<p></p><pre><code>    printf("%8.2f", foo)</code></pre></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
            <tr class="athing comtr" id="42483120"><td><table border="0">  <tbody><tr>    <td class="ind" indent="3"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="120"></td><td valign="top" class="votelinks">
      <center><a id="up_42483120" href="https://news.ycombinator.com/vote?id=42483120&amp;how=up&amp;goto=item%3Fid%3D42439654"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=rowanG077" class="hnuser">rowanG077</a> <span class="age" title="2024-12-21T23:19:00 1734823140"><a href="https://news.ycombinator.com/item?id=42483120">4 months ago</a></span> <span id="unv_42483120"></span>          <span class="navs">
             | <a href="#42482255" class="clicky" aria-hidden="true">root</a> | <a href="#42483043" class="clicky" aria-hidden="true">parent</a> | <a href="#42483119" class="clicky" aria-hidden="true">prev</a> | <a href="#42446774" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="42483120" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">Also hard to be more cryptic. The amount of times I regoogle that syntax, or what exactly those numbers mean is basically uncountable.</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                              <tr class="athing comtr" id="42446774"><td><table border="0">  <tbody><tr>    <td class="ind" indent="0"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="0"></td><td valign="top" class="votelinks">
      <center><a id="up_42446774" href="https://news.ycombinator.com/vote?id=42446774&amp;how=up&amp;goto=item%3Fid%3D42439654"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=simscitizen" class="hnuser">simscitizen</a> <span class="age" title="2024-12-17T23:56:46 1734479806"><a href="https://news.ycombinator.com/item?id=42446774">4 months ago</a></span> <span id="unv_42446774"></span>          <span class="navs">
             | <a href="#42482255" class="clicky" aria-hidden="true">prev</a> | <a href="#42448961" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="42446774" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">There are quite a few of these "better C string" idioms floating around.<p>Another one to consider is e.g. <a href="https://github.com/antirez/sds">https://github.com/antirez/sds</a> (used by Redis), which instead stores the string contents in-line with the metadata.</p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
            <tr class="athing comtr" id="42448961"><td><table border="0">  <tbody><tr>    <td class="ind" indent="0"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="0"></td><td valign="top" class="votelinks">
      <center><a id="up_42448961" href="https://news.ycombinator.com/vote?id=42448961&amp;how=up&amp;goto=item%3Fid%3D42439654"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=ropejumper" class="hnuser">ropejumper</a> <span class="age" title="2024-12-18T08:36:59 1734511019"><a href="https://news.ycombinator.com/item?id=42448961">4 months ago</a></span> <span id="unv_42448961"></span>          <span class="navs">
             | <a href="#42446774" class="clicky" aria-hidden="true">prev</a> | <a href="#42482310" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="42448961" n="8" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">Two people have already mentioned things like storing the length inline or including a null-terminator to be backwards-compatible. What's described there is basically the same as std::string_view or &amp;str, and to me one of the biggest reasons to use these structures is that your particular view of the string doesn't interfere with someone else's. You can slice your string in the middle and just look at it piecewise without bothering anyone else.<p>Choosing between these trade-offs just depends on what you're doing. I'd definitely choose this pattern if I were to write a parser for instance.</p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="42481833"><td><table border="0">  <tbody><tr>    <td class="ind" indent="1"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="40"></td><td valign="top" class="votelinks">
      <center><a id="up_42481833" href="https://news.ycombinator.com/vote?id=42481833&amp;how=up&amp;goto=item%3Fid%3D42439654"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=Dwedit" class="hnuser">Dwedit</a> <span class="age" title="2024-12-21T19:55:16 1734810916"><a href="https://news.ycombinator.com/item?id=42481833">4 months ago</a></span> <span id="unv_42481833"></span>          <span class="navs">
             | <a href="#42448961" class="clicky" aria-hidden="true">parent</a> | <a href="#42482310" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="42481833" n="7" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">The problem with string views is that they are borrowing the parent string, so you'd need to hold a strong reference to the parent string.  This is easy to do in a garbage collected language, because you don't have to do anything.  But it's a lot more complicated if you need to do this with reference counting.  Do you make every single string view update the reference counter?  Do you make a special lighter string view that doesn't keep a counted reference, and is subject to memory safety issues?</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="42487421"><td><table border="0">  <tbody><tr>    <td class="ind" indent="2"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="80"></td><td valign="top" class="votelinks">
      <center><a id="up_42487421" href="https://news.ycombinator.com/vote?id=42487421&amp;how=up&amp;goto=item%3Fid%3D42439654"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=ropejumper" class="hnuser">ropejumper</a> <span class="age" title="2024-12-22T16:40:12 1734885612"><a href="https://news.ycombinator.com/item?id=42487421">4 months ago</a></span> <span id="unv_42487421"></span>          <span class="navs">
             | <a href="#42448961" class="clicky" aria-hidden="true">root</a> | <a href="#42481833" class="clicky" aria-hidden="true">parent</a> | <a href="#42482061" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="42487421" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">Yep, you're right. One way to make this less of a problem is to make this distinction at the type level, having both an owned_string and a string_view for example. You can even make owned_string store its length inline.</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
            <tr class="athing comtr" id="42482061"><td><table border="0">  <tbody><tr>    <td class="ind" indent="2"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="80"></td><td valign="top" class="votelinks">
      <center><a id="up_42482061" href="https://news.ycombinator.com/vote?id=42482061&amp;how=up&amp;goto=item%3Fid%3D42439654"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=wruza" class="hnuser">wruza</a> <span class="age" title="2024-12-21T20:30:39 1734813039"><a href="https://news.ycombinator.com/item?id=42482061">4 months ago</a></span> <span id="unv_42482061"></span>          <span class="navs">
             | <a href="#42448961" class="clicky" aria-hidden="true">root</a> | <a href="#42481833" class="clicky" aria-hidden="true">parent</a> | <a href="#42487421" class="clicky" aria-hidden="true">prev</a> | <a href="#42482310" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="42482061" n="5" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">These are regular questions in languages with (and without) reference counting, what’s so special about string views?</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="42482347"><td><table border="0">  <tbody><tr>    <td class="ind" indent="3"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="120"></td><td valign="top" class="votelinks">
      <center><a id="up_42482347" href="https://news.ycombinator.com/vote?id=42482347&amp;how=up&amp;goto=item%3Fid%3D42439654"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=conradludgate" class="hnuser">conradludgate</a> <span class="age" title="2024-12-21T21:13:53 1734815633"><a href="https://news.ycombinator.com/item?id=42482347">4 months ago</a></span> <span id="unv_42482347"></span>          <span class="navs">
             | <a href="#42448961" class="clicky" aria-hidden="true">root</a> | <a href="#42482061" class="clicky" aria-hidden="true">parent</a> | <a href="#42482276" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="42482347" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">Typically you need 4 pointers to represent a strong reference count for a string view.<p>* One for the start of the source string, with an inline strong count
* One for the end of the source string so you know how much to deallocate (only really applicable to Rust)
* One for the start of the view
* One for the end of the view</p><p>32 bytes for each string view is quite a lot. Depending on context you could use 32bit lengths instead of end-pointers if you're OK with &lt;4GB strings, saving 8 bytes.</p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
            <tr class="athing comtr" id="42482276"><td><table border="0">  <tbody><tr>    <td class="ind" indent="3"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="120"></td><td valign="top" class="votelinks">
      <center><a id="up_42482276" href="https://news.ycombinator.com/vote?id=42482276&amp;how=up&amp;goto=item%3Fid%3D42439654"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=Dwedit" class="hnuser">Dwedit</a> <span class="age" title="2024-12-21T21:04:16 1734815056"><a href="https://news.ycombinator.com/item?id=42482276">4 months ago</a></span> <span id="unv_42482276"></span>          <span class="navs">
             | <a href="#42448961" class="clicky" aria-hidden="true">root</a> | <a href="#42482061" class="clicky" aria-hidden="true">parent</a> | <a href="#42482347" class="clicky" aria-hidden="true">prev</a> | <a href="#42482310" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="42482276" n="3" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">There's basically no distinction between a string view and an array slice.  It's borrowing an array, and the view is nothing but a reference to the parent, start position, and length.<p>But views are also implemented as a plain pointer and a length, and that's where the memory safety issues from borrowing begin.</p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="42482401"><td><table border="0">  <tbody><tr>    <td class="ind" indent="4"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="160"></td><td valign="top" class="votelinks">
      <center><a id="up_42482401" href="https://news.ycombinator.com/vote?id=42482401&amp;how=up&amp;goto=item%3Fid%3D42439654"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=wruza" class="hnuser">wruza</a> <span class="age" title="2024-12-21T21:19:19 1734815959"><a href="https://news.ycombinator.com/item?id=42482401">4 months ago</a></span> <span id="unv_42482401"></span>          <span class="navs">
             | <a href="#42448961" class="clicky" aria-hidden="true">root</a> | <a href="#42482276" class="clicky" aria-hidden="true">parent</a> | <a href="#42482310" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="42482401" n="2" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">I understand the concern, but can’t you just maintain an actual reference field to parent_str in a string view? Unless I missed some no-extra-fields constraint itt, then sorry for the noise.</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="42482798"><td><table border="0">  <tbody><tr>    <td class="ind" indent="5"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="200"></td><td valign="top" class="votelinks">
      <center><a id="up_42482798" href="https://news.ycombinator.com/vote?id=42482798&amp;how=up&amp;goto=item%3Fid%3D42439654"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=Dwedit" class="hnuser">Dwedit</a> <span class="age" title="2024-12-21T22:21:03 1734819663"><a href="https://news.ycombinator.com/item?id=42482798">4 months ago</a></span> <span id="unv_42482798"></span>          <span class="navs">
             | <a href="#42448961" class="clicky" aria-hidden="true">root</a> | <a href="#42482401" class="clicky" aria-hidden="true">parent</a> | <a href="#42482310" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="42482798" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">Let's say you took a document as a string, and split it up into words using a lot of string views.  Every string view created would affect the reference count of the parent string.  Then every time you work with the string views, saving temporary instances, passing them to a function, assigning them, whatever, you're affecting the parent string's reference count.<p>And reference counts are often atomic integer operations, so it might not be a regular memory increment, instead it would be an interlocked increment.  And if there's multiple threads, the CPU cores will be competing over who gets to keep the reference counter in their L1 cache line.  (There is a way around this where you can give threads an their own reference counter)</p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                                          <tr class="athing comtr" id="42482310"><td><table border="0">  <tbody><tr>    <td class="ind" indent="0"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="0"></td><td valign="top" class="votelinks">
      <center><a id="up_42482310" href="https://news.ycombinator.com/vote?id=42482310&amp;how=up&amp;goto=item%3Fid%3D42439654"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=jdblair" class="hnuser">jdblair</a> <span class="age" title="2024-12-21T21:08:58 1734815338"><a href="https://news.ycombinator.com/item?id=42482310">4 months ago</a></span> <span id="unv_42482310"></span>          <span class="navs">
             | <a href="#42448961" class="clicky" aria-hidden="true">prev</a> | <a href="#42447760" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="42482310" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">I've done something similar, but unlike the author, I always reserved one extra byte and I always null terminated the string. This was so I could use existing string output functions.</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
            <tr class="athing comtr" id="42447760"><td><table border="0">  <tbody><tr>    <td class="ind" indent="0"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="0"></td><td valign="top" class="votelinks">
      <center><a id="up_42447760" href="https://news.ycombinator.com/vote?id=42447760&amp;how=up&amp;goto=item%3Fid%3D42439654"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=cozzyd" class="hnuser">cozzyd</a> <span class="age" title="2024-12-18T03:04:25 1734491065"><a href="https://news.ycombinator.com/item?id=42447760">4 months ago</a></span> <span id="unv_42447760"></span>          <span class="navs">
             | <a href="#42482310" class="clicky" aria-hidden="true">prev</a> | <a href="#42482518" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="42447760" n="3" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">Why not have the null terminator so you can pass to normal printf?<p>You could even do something crazy with packing a null byte with sz on 64-bit systems (since you will never have a string that long anyway...)</p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="42465981"><td><table border="0">  <tbody><tr>    <td class="ind" indent="1"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="40"></td><td valign="top" class="votelinks">
      <center><a id="up_42465981" href="https://news.ycombinator.com/vote?id=42465981&amp;how=up&amp;goto=item%3Fid%3D42439654"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=D4ckard" class="hnuser">D4ckard</a> <span class="age" title="2024-12-19T21:42:16 1734644536"><a href="https://news.ycombinator.com/item?id=42465981">4 months ago</a></span> <span id="unv_42465981"></span>          <span class="navs">
             | <a href="#42447760" class="clicky" aria-hidden="true">parent</a> | <a href="#42481788" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="42465981" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">Yes, there are really cool packing techniques. See this talk for example: <a href="https://www.youtube.com/watch?v=kPR8h4-qZdk" rel="nofollow">https://www.youtube.com/watch?v=kPR8h4-qZdk</a><p>I don't include the null-terminator because I use this type in my own environment where I never use null-terminated strings so there is no need for it.</p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
            <tr class="athing comtr" id="42481788"><td><table border="0">  <tbody><tr>    <td class="ind" indent="1"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="40"></td><td valign="top" class="votelinks">
      <center><a id="up_42481788" href="https://news.ycombinator.com/vote?id=42481788&amp;how=up&amp;goto=item%3Fid%3D42439654"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=bigpingo" class="hnuser">bigpingo</a> <span class="age" title="2024-12-21T19:50:46 1734810646"><a href="https://news.ycombinator.com/item?id=42481788">4 months ago</a></span> <span id="unv_42481788"></span>          <span class="navs">
             | <a href="#42447760" class="clicky" aria-hidden="true">parent</a> | <a href="#42465981" class="clicky" aria-hidden="true">prev</a> | <a href="#42482518" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="42481788" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00"><p></p><pre><code>  printf("%.*s", len, str);
</code></pre>
lets you pass the length as an int argument.</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                  <tr class="athing comtr" id="42482518"><td><table border="0">  <tbody><tr>    <td class="ind" indent="0"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="0"></td><td valign="top" class="votelinks">
      <center><a id="up_42482518" href="https://news.ycombinator.com/vote?id=42482518&amp;how=up&amp;goto=item%3Fid%3D42439654"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=up2isomorphism" class="hnuser">up2isomorphism</a> <span class="age" title="2024-12-21T21:34:45 1734816885"><a href="https://news.ycombinator.com/item?id=42482518">4 months ago</a></span> <span id="unv_42482518"></span>          <span class="navs">
             | <a href="#42447760" class="clicky" aria-hidden="true">prev</a> | <a href="#42483290" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="42482518" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">For all the complaints ,all you need to do is to include an another .h files from some string lib and that’s it.<p>But I would say for 95% percent using a fixed length char array with strncpy will work just fine.</p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
            <tr class="athing comtr" id="42483290"><td><table border="0">  <tbody><tr>    <td class="ind" indent="0"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="0"></td><td valign="top" class="votelinks">
      <center><a id="up_42483290" href="https://news.ycombinator.com/vote?id=42483290&amp;how=up&amp;goto=item%3Fid%3D42439654"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=superjared" class="hnuser">superjared</a> <span class="age" title="2024-12-21T23:50:42 1734825042"><a href="https://news.ycombinator.com/item?id=42483290">4 months ago</a></span> <span id="unv_42483290"></span>          <span class="navs">
             | <a href="#42482518" class="clicky" aria-hidden="true">prev</a> | <a href="#42482830" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="42483290" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">The bstring library[0] has been around a _long_ time.<p>[0]: <a href="https://bstring.sourceforge.net/" rel="nofollow">https://bstring.sourceforge.net/</a></p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
            <tr class="athing comtr" id="42482830"><td><table border="0">  <tbody><tr>    <td class="ind" indent="0"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="0"></td><td valign="top" class="votelinks">
      <center><a id="up_42482830" href="https://news.ycombinator.com/vote?id=42482830&amp;how=up&amp;goto=item%3Fid%3D42439654"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=codr7" class="hnuser">codr7</a> <span class="age" title="2024-12-21T22:25:46 1734819946"><a href="https://news.ycombinator.com/item?id=42482830">4 months ago</a></span> <span id="unv_42482830"></span>          <span class="navs">
             | <a href="#42483290" class="clicky" aria-hidden="true">prev</a> | <a href="#42482859" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="42482830" n="2" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">I would consider putting the buffer last in the structure and making it flexible to allow skipping one allocation.</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="42483184"><td><table border="0">  <tbody><tr>    <td class="ind" indent="1"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="40"></td><td valign="top" class="votelinks">
      <center><a id="up_42483184" href="https://news.ycombinator.com/vote?id=42483184&amp;how=up&amp;goto=item%3Fid%3D42439654"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=ncruces" class="hnuser">ncruces</a> <span class="age" title="2024-12-21T23:29:26 1734823766"><a href="https://news.ycombinator.com/item?id=42483184">4 months ago</a></span> <span id="unv_42483184"></span>          <span class="navs">
             | <a href="#42482830" class="clicky" aria-hidden="true">parent</a> | <a href="#42482859" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="42483184" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">That misses the point. These are passed by value.</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                            <tr class="athing comtr" id="42482859"><td><table border="0">  <tbody><tr>    <td class="ind" indent="0"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="0"></td><td valign="top" class="votelinks">
      <center><a id="up_42482859" href="https://news.ycombinator.com/vote?id=42482859&amp;how=up&amp;goto=item%3Fid%3D42439654"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=Levitating" class="hnuser">Levitating</a> <span class="age" title="2024-12-21T22:30:19 1734820219"><a href="https://news.ycombinator.com/item?id=42482859">4 months ago</a></span> <span id="unv_42482859"></span>          <span class="navs">
             | <a href="#42482830" class="clicky" aria-hidden="true">prev</a> | <a href="#42486531" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="42482859" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">&gt;  I liked this kind of pattern at the bottom of OpenAI's site :)<p>Where on OpenAI's site do I find a footer like that?</p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
            <tr class="athing comtr" id="42486531"><td><table border="0">  <tbody><tr>    <td class="ind" indent="0"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="0"></td><td valign="top" class="votelinks">
      <center><a id="up_42486531" href="https://news.ycombinator.com/vote?id=42486531&amp;how=up&amp;goto=item%3Fid%3D42439654"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=Quis_sum" class="hnuser">Quis_sum</a> <span class="age" title="2024-12-22T14:32:12 1734877932"><a href="https://news.ycombinator.com/item?id=42486531">4 months ago</a></span> <span id="unv_42486531"></span>          <span class="navs">
             | <a href="#42482859" class="clicky" aria-hidden="true">prev</a> | <a href="#42485202" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="42486531" n="5" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">Sorry, but there is a significant misunderstanding:
There is no such thing as a string in C. What you call a string is a pointer to char (typically "int8") - nothing more nothing less.
The \0 termination is just a convention/convenience to avoid passing the bounds of the memory segment, resp. when to stop processing earlier.<p>Once you go down the route proposed by many of the comments here - why not enhance it to deal with UTF8...
Or rather implement a proper "array" type?
What about the lack of multidimensional arrays instead of the pointer to pointer to ... approach? Idiosyncracies such as "int a[2][3];" being of type "int *" and not "int **"?</p><p>C was never intended to shield you from mistakes, but rather replace a macro assembler.
ANSI C addressed some of the issues in the original K&amp;R C, but that is about it.</p><p>If your use case would benefit from all of these protections, there are plenty of higher level language alternatives...</p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="42489499"><td><table border="0">  <tbody><tr>    <td class="ind" indent="1"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="40"></td><td valign="top" class="votelinks">
      <center><a id="up_42489499" href="https://news.ycombinator.com/vote?id=42489499&amp;how=up&amp;goto=item%3Fid%3D42439654"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=kelnos" class="hnuser">kelnos</a> <span class="age" title="2024-12-22T21:58:32 1734904712"><a href="https://news.ycombinator.com/item?id=42489499">4 months ago</a></span> <span id="unv_42489499"></span>          <span class="navs">
             | <a href="#42486531" class="clicky" aria-hidden="true">parent</a> | <a href="#42488703" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="42489499" n="2" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">That's incorrect.  If I write this in my .c file:<p></p><pre><code>    char *s = "Hi";
</code></pre>
The compiler will not treat that as a simple mere pointer to char when allocating space for it in the binary. It will see that the rhs is surrounded by double quote characters, and allocate 3 bytes for it, instead of 2, and put a NUL byte after the bytes for 'H' and 'i'.<p>Nul-tetminated strings are absolutely a part of the language. Certainly you can make and store strings in a different way if you'd like, but the language itself defines what a string and string literal is.</p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="42491222"><td><table border="0">  <tbody><tr>    <td class="ind" indent="2"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="80"></td><td valign="top" class="votelinks">
      <center><a id="up_42491222" href="https://news.ycombinator.com/vote?id=42491222&amp;how=up&amp;goto=item%3Fid%3D42439654"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=Quis_sum" class="hnuser">Quis_sum</a> <span class="age" title="2024-12-23T02:38:39 1734921519"><a href="https://news.ycombinator.com/item?id=42491222">4 months ago</a></span> <span id="unv_42491222"></span>          <span class="navs">
             | <a href="#42486531" class="clicky" aria-hidden="true">root</a> | <a href="#42489499" class="clicky" aria-hidden="true">parent</a> | <a href="#42488703" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="42491222" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">s is still a pointer to character.
This is just an optimised shorthand for (assuming ASCII):<p>char s[3];</p><p>Which is then initialised with:
0x48,0x69,0x00</p><p>There simply is no such thing as a string type in C.</p><p>All the "string" functions work on a char pointer which is incremented until it points to a 0.</p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                  <tr class="athing comtr" id="42488703"><td><table border="0">  <tbody><tr>    <td class="ind" indent="1"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="40"></td><td valign="top" class="votelinks">
      <center><a id="up_42488703" href="https://news.ycombinator.com/vote?id=42488703&amp;how=up&amp;goto=item%3Fid%3D42439654"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=__d" class="hnuser">__d</a> <span class="age" title="2024-12-22T20:06:56 1734898016"><a href="https://news.ycombinator.com/item?id=42488703">4 months ago</a></span> <span id="unv_42488703"></span>          <span class="navs">
             | <a href="#42486531" class="clicky" aria-hidden="true">parent</a> | <a href="#42489499" class="clicky" aria-hidden="true">prev</a> | <a href="#42485202" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="42488703" n="2" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">String literals are one place where the compiler implements the null-termination, so it is built-in in that sense.<p>As per the OP’s example, a wrapper macro like their STR can work around this.</p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="42491382"><td><table border="0">  <tbody><tr>    <td class="ind" indent="2"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="80"></td><td valign="top" class="votelinks">
      <center><a id="up_42491382" href="https://news.ycombinator.com/vote?id=42491382&amp;how=up&amp;goto=item%3Fid%3D42439654"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=Quis_sum" class="hnuser">Quis_sum</a> <span class="age" title="2024-12-23T03:08:18 1734923298"><a href="https://news.ycombinator.com/item?id=42491382">4 months ago</a></span> <span id="unv_42491382"></span>          <span class="navs">
             | <a href="#42486531" class="clicky" aria-hidden="true">root</a> | <a href="#42488703" class="clicky" aria-hidden="true">parent</a> | <a href="#42485202" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="42491382" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">I don't have an issue with the OP's example, which is quite nifty indeed, despite the penalties incurred.</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                        <tr class="athing comtr" id="42485202"><td><table border="0">  <tbody><tr>    <td class="ind" indent="0"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="0"></td><td valign="top" class="votelinks">
      <center><a id="up_42485202" href="https://news.ycombinator.com/vote?id=42485202&amp;how=up&amp;goto=item%3Fid%3D42439654"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=teo_zero" class="hnuser">teo_zero</a> <span class="age" title="2024-12-22T08:58:15 1734857895"><a href="https://news.ycombinator.com/item?id=42485202">4 months ago</a></span> <span id="unv_42485202"></span>          <span class="navs">
             | <a href="#42486531" class="clicky" aria-hidden="true">prev</a> | <a href="#42482894" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="42485202" n="3" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">Good attempt at a topic that annoys many programmers.<p>I see a problem with the separation between str and str_buf, though: you create new strings with the latter, but most functions take the former as arguments. Do you convert them every time? Isn't your code littered with str_from_buf()?</p><p>Put it in another way, it's like the mess with const that you mention in your article. If str is the type you use for a const read-only string, and str_buf for a non-const mutable string, you would like to pass a non-const even to those functions that "only" require a const. (I say "only" because being const is a weaker requirement than being mutable; the fact that it's more wordy is another thing that C's syntax makes confusing, but this is an entirely different topic!)</p><p>It would be nice if the compiler could be instructed to automatically cast str_buf into str and not vice versa, just like it does for non-const to const.</p><p>The only way out I can think of, would be to get rid of the two types and only use the one with the cap field, with the convention that if cap is zero, then the string is read-only. The drawback is that certain mistakes are only detected at run-time and not enforced by the compiler. For example, a function than takes a string s and replaces every substring s1 with s2 could have the following prototype in the two-type system:</p><p></p><pre><code>  replace(str_buf s, str s1, str s2);
</code></pre>
And it would be immediate to recognize that you cannot pass a read-only string as the first argument. With a one-type system you loose this ability.<p>Oh well, I guess if a perfect solution existed, it would have been adopted by the C committee, wouldn't it? /s</p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="42489521"><td><table border="0">  <tbody><tr>    <td class="ind" indent="1"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="40"></td><td valign="top" class="votelinks">
      <center><a id="up_42489521" href="https://news.ycombinator.com/vote?id=42489521&amp;how=up&amp;goto=item%3Fid%3D42439654"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=kelnos" class="hnuser">kelnos</a> <span class="age" title="2024-12-22T22:01:53 1734904913"><a href="https://news.ycombinator.com/item?id=42489521">4 months ago</a></span> <span id="unv_42489521"></span>          <span class="navs">
             | <a href="#42485202" class="clicky" aria-hidden="true">parent</a> | <a href="#42482894" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="42489521" n="2" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">Do you convert them every time?<p>No, the article addresses this: since the memory layout of the first two struct members is the same in both structs, you can use a pointer to str_buf anywhere a function calls for a pointer to str, after casting it.</p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="42493112"><td><table border="0">  <tbody><tr>    <td class="ind" indent="2"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="80"></td><td valign="top" class="votelinks">
      <center><a id="up_42493112" href="https://news.ycombinator.com/vote?id=42493112&amp;how=up&amp;goto=item%3Fid%3D42439654"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=teo_zero" class="hnuser">teo_zero</a> <span class="age" title="2024-12-23T09:37:48 1734946668"><a href="https://news.ycombinator.com/item?id=42493112">4 months ago</a></span> <span id="unv_42493112"></span>          <span class="navs">
             | <a href="#42485202" class="clicky" aria-hidden="true">root</a> | <a href="#42489521" class="clicky" aria-hidden="true">parent</a> | <a href="#42482894" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="42493112" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">&gt; you can use a pointer to str_buf anywhere a function calls for a pointer to str<p>Yes, you <i>could</i>, but I see no function mentioned in TFA that wants a pointer to str, only functions that want a str: print_str(), print_fmt(), com_write(). At the same time, the functions that <i>return</i> strings return a struct, never a pointer: str_new(), str_from_range(), str_from_buf(), fmt_buf_new(), and the pseudo-function STR().</p><p>To use the memory layout trick you should go through reference + cast + dereference:</p><p></p><pre><code>  *((struct str *)&amp;...)
</code></pre>
My question still holds: is the code littered by such conversion artifacts?</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                        <tr class="athing comtr" id="42482894"><td><table border="0">  <tbody><tr>    <td class="ind" indent="0"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="0"></td><td valign="top" class="votelinks">
      <center><a id="up_42482894" href="https://news.ycombinator.com/vote?id=42482894&amp;how=up&amp;goto=item%3Fid%3D42439654"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=zwnow" class="hnuser">zwnow</a> <span class="age" title="2024-12-21T22:36:57 1734820617"><a href="https://news.ycombinator.com/item?id=42482894">4 months ago</a></span> <span id="unv_42482894"></span>          <span class="navs">
             | <a href="#42485202" class="clicky" aria-hidden="true">prev</a> | <a href="#42482244" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="42482894" n="4" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c88">Never had a string related bug in any programming language in 4 years. I sincerely don't know what people talk about when they claim strings are buggy? What kinda tasks do these happen in?</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="42482906"><td><table border="0">  <tbody><tr>    <td class="ind" indent="1"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="40"></td><td valign="top" class="votelinks">
      <center><a id="up_42482906" href="https://news.ycombinator.com/vote?id=42482906&amp;how=up&amp;goto=item%3Fid%3D42439654"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=Koshkin" class="hnuser">Koshkin</a> <span class="age" title="2024-12-21T22:39:13 1734820753"><a href="https://news.ycombinator.com/item?id=42482906">4 months ago</a></span> <span id="unv_42482906"></span>          <span class="navs">
             | <a href="#42482894" class="clicky" aria-hidden="true">parent</a> | <a href="#42483030" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="42482906" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">It's just that the "traditional" implementations of the operations on C strings (strcat etc.) are considered unsafe - which they are, strictly speaking. (But, to be fair, I haven't ever had problems using them, either.)</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
            <tr class="athing comtr" id="42483030"><td><table border="0">  <tbody><tr>    <td class="ind" indent="1"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="40"></td><td valign="top" class="votelinks">
      <center><a id="up_42483030" href="https://news.ycombinator.com/vote?id=42483030&amp;how=up&amp;goto=item%3Fid%3D42439654"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=paulddraper" class="hnuser">paulddraper</a> <span class="age" title="2024-12-21T23:00:40 1734822040"><a href="https://news.ycombinator.com/item?id=42483030">4 months ago</a></span> <span id="unv_42483030"></span>          <span class="navs">
             | <a href="#42482894" class="clicky" aria-hidden="true">parent</a> | <a href="#42482906" class="clicky" aria-hidden="true">prev</a> | <a href="#42482244" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="42483030" n="2" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">I don’t know who you’re talking to or what they’re saying, do I can’t say.<p>This article is about C strings FYI.</p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="42485702"><td><table border="0">  <tbody><tr>    <td class="ind" indent="2"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="80"></td><td valign="top" class="votelinks">
      <center><a id="up_42485702" href="https://news.ycombinator.com/vote?id=42485702&amp;how=up&amp;goto=item%3Fid%3D42439654"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=zwnow" class="hnuser">zwnow</a> <span class="age" title="2024-12-22T11:24:19 1734866659"><a href="https://news.ycombinator.com/item?id=42485702">4 months ago</a></span> <span id="unv_42485702"></span>          <span class="navs">
             | <a href="#42482894" class="clicky" aria-hidden="true">root</a> | <a href="#42483030" class="clicky" aria-hidden="true">parent</a> | <a href="#42482244" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="42485702" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">The article claims they are buggy, thats what I am refering to.</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                        <tr class="athing comtr" id="42482244"><td><table border="0">  <tbody><tr>    <td class="ind" indent="0"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="0"></td><td valign="top" class="votelinks">
      <center><a id="up_42482244" href="https://news.ycombinator.com/vote?id=42482244&amp;how=up&amp;goto=item%3Fid%3D42439654"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=zabzonk" class="hnuser">zabzonk</a> <span class="age" title="2024-12-21T20:59:16 1734814756"><a href="https://news.ycombinator.com/item?id=42482244">4 months ago</a></span> <span id="unv_42482244"></span>          <span class="navs">
             | <a href="#42482894" class="clicky" aria-hidden="true">prev</a> <a class="togg clicky" id="42482244" n="5" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c9C">I have been using null terminated strings since the mid 1970s - before using C, and have never had any problems with them.I have never seen an explanation from someone that has that makes any sense.</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="42482588"><td><table border="0">  <tbody><tr>    <td class="ind" indent="1"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="40"></td><td valign="top" class="votelinks">
      <center><a id="up_42482588" href="https://news.ycombinator.com/vote?id=42482588&amp;how=up&amp;goto=item%3Fid%3D42439654"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=atiedebee" class="hnuser">atiedebee</a> <span class="age" title="2024-12-21T21:45:35 1734817535"><a href="https://news.ycombinator.com/item?id=42482588">4 months ago</a></span> <span id="unv_42482588"></span>          <span class="navs">
             | <a href="#42482244" class="clicky" aria-hidden="true">parent</a> <a class="togg clicky" id="42482588" n="4" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">In my experience, the standard library is inconsistent with its 0 terminator handling.<p>fgets will treat the length passed as the capacity of the buffer, and terminate the last byte with a 0.</p><p>scanf however treats the length as the number of characters to read, meaning that you need a capacity of n+1 to make sure the 0 terminator is stored properly as well.</p><p>Its quite easy to mess up placing the 0 terminator yourself too. It's an overall unnecessary burden that could've been fixed quite easily.</p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="42483269"><td><table border="0">  <tbody><tr>    <td class="ind" indent="2"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="80"></td><td valign="top" class="votelinks">
      <center><a id="up_42483269" href="https://news.ycombinator.com/vote?id=42483269&amp;how=up&amp;goto=item%3Fid%3D42439654"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=zabzonk" class="hnuser">zabzonk</a> <span class="age" title="2024-12-21T23:47:06 1734824826"><a href="https://news.ycombinator.com/item?id=42483269">4 months ago</a></span> <span id="unv_42483269"></span>          <span class="navs">
             | <a href="#42482244" class="clicky" aria-hidden="true">root</a> | <a href="#42482588" class="clicky" aria-hidden="true">parent</a> <a class="togg clicky" id="42483269" n="3" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">the standard library certainly has a few problems, if you haven't read the docs, but that does not mean that i do.</div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="42489552"><td><table border="0">  <tbody><tr>    <td class="ind" indent="3"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="120"></td><td valign="top" class="votelinks">
      <center><a id="up_42489552" href="https://news.ycombinator.com/vote?id=42489552&amp;how=up&amp;goto=item%3Fid%3D42439654"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=kelnos" class="hnuser">kelnos</a> <span class="age" title="2024-12-22T22:06:11 1734905171"><a href="https://news.ycombinator.com/item?id=42489552">4 months ago</a></span> <span id="unv_42489552"></span>          <span class="navs">
             | <a href="#42482244" class="clicky" aria-hidden="true">root</a> | <a href="#42483269" class="clicky" aria-hidden="true">parent</a> <a class="togg clicky" id="42489552" n="2" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">I'm sorry that not every programmer in the world has achieved your level of supreme perfection. We shouldn't design our languages or stdlib with the assumption that everyone will have read every line of documentation about them, and (even if they have) remember everything every time they sit down in front of their text editor. That's unrealistic.<p>I don't actually believe you that you've been programming for 50 years and never misused a string or a string API in C or a language with similar string handling. But even if I did believe you, it wouldn't matter. Many people make mistakes, and those mistakes have cost people a lot of time, money, and stress. If you've not read about any of these instances, then I suggest you've been living under a rock and are incredibly out of touch.</p><p>Or you're just trolling.</p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                <tr class="athing comtr" id="42494494"><td><table border="0">  <tbody><tr>    <td class="ind" indent="4"><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="1" width="160"></td><td valign="top" class="votelinks">
      <center><a id="up_42494494" href="https://news.ycombinator.com/vote?id=42494494&amp;how=up&amp;goto=item%3Fid%3D42439654"><div class="votearrow" title="upvote"></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="https://news.ycombinator.com/user?id=Quis_sum" class="hnuser">Quis_sum</a> <span class="age" title="2024-12-23T14:14:31 1734963271"><a href="https://news.ycombinator.com/item?id=42494494">4 months ago</a></span> <span id="unv_42494494"></span>          <span class="navs">
             | <a href="#42482244" class="clicky" aria-hidden="true">root</a> | <a href="#42489552" class="clicky" aria-hidden="true">parent</a> <a class="togg clicky" id="42494494" n="1" href="javascript:;">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">C was designed in the 1970s with the goal of giving you minimal overhead, bar using a macro-assembler.
The way C handles "strings" provides exactly that.<p>The OP clearly stated that he did not mind the overhead (in terms of executable size, memory consumption, execution speed) in his particular use case.</p></div>
              <div class="reply">        <p><font size="1">
                  </font>
      </p></div></div></td></tr>
        </tbody></table></td></tr>
                                    </tbody></table>
  <br><br>
</td></tr>
<tr><td><img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" height="10" width="0"><table width="100%" cellspacing="0" cellpadding="1"><tbody><tr><td bgcolor="#ff6600"></td></tr></tbody></table><br>
<center><a href="https://www.ycombinator.com/apply/">Consider applying for YC's Summer 2025 batch! Applications are open till May 13</a></center><br>
<center><span class="yclinks"><a href="https://news.ycombinator.com/newsguidelines.html">Guidelines</a> | <a href="https://news.ycombinator.com/newsfaq.html">FAQ</a> | <a href="https://news.ycombinator.com/lists">Lists</a> | <a href="https://github.com/HackerNews/API">API</a> | <a href="https://news.ycombinator.com/security.html">Security</a> | <a href="https://www.ycombinator.com/legal/">Legal</a> | <a href="https://www.ycombinator.com/apply/">Apply to YC</a> | <a href="mailto:hn@ycombinator.com">Contact</a></span><br><br>
<form method="get" action="https://hn.algolia.com/">Search: <input type="text" name="q" size="17" autocorrect="off" spellcheck="false" autocapitalize="off" autocomplete="off"></form></center></td></tr>      </tbody></table></center>
      <script type="text/javascript"></script>
  
</body></html>
